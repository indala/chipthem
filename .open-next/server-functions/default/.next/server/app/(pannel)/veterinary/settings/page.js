(()=>{var e={};e.id=3336,e.ids=[3336],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},88109:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,pages:()=>d,routeModule:()=>p,tree:()=>c});var r=s(38413),n=s(97626),a=s(66308),i=s.n(a),o=s(68819),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["(pannel)",{children:["veterinary",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,90311)),"/home/chinnu/projects/chipthem/src/app/(pannel)/veterinary/settings/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,35594)),"/home/chinnu/projects/chipthem/src/app/(pannel)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35248,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,42025,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,72470,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,99017))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,12282)),"/home/chinnu/projects/chipthem/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35248,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,42025,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,72470,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,99017))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/home/chinnu/projects/chipthem/src/app/(pannel)/veterinary/settings/page.tsx"],x={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/(pannel)/veterinary/settings/page",pathname:"/veterinary/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},48441:(e,t,s)=>{Promise.resolve().then(s.bind(s,90311))},35417:(e,t,s)=>{Promise.resolve().then(s.bind(s,61407))},61407:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(76635),n=s(20830),a=s(78083);function i(){let{veterinary:e,isLoading:t,error:s,fetchVeterinaryData:i,updatePassword:o}=(0,a.K)(),[l,c]=(0,n.useState)(!1),[d,x]=(0,n.useState)(""),[p,u]=(0,n.useState)(""),[m,h]=(0,n.useState)(null),g=async t=>{if(t.preventDefault(),e?.id){if(h(null),p.length<8){h("New password must be at least 8 characters long.");return}await o(e.id,d,p),x(""),u(""),c(!1)}};if(t&&!e)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:"Loading settings…"})});if(s&&!e)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsx)("p",{className:"text-red-600 text-sm",children:s})});if(!e)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:"No account data found."})});let b=e.subscription_status&&"not subscribed"!==e.subscription_status.toLowerCase();return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"border-b bg-white",children:(0,r.jsxs)("div",{className:"max-w-3xl mx-auto px-4 py-4",children:[(0,r.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Settings"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Manage your account security and subscription status."})]})}),(0,r.jsxs)("main",{className:"max-w-3xl mx-auto px-4 py-6 space-y-6",children:[(0,r.jsxs)("section",{className:"bg-white rounded-xl shadow-sm border p-4 space-y-3",children:[(0,r.jsx)("h2",{className:"text-sm font-semibold text-gray-900",children:"Account status"}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 text-xs text-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Verification"}),(0,r.jsx)("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-[11px] font-medium ${e.is_verified?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:e.is_verified?"Verified clinic":"Pending verification"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Status"}),(0,r.jsx)("span",{className:"text-gray-900 capitalize",children:e.status||"pending"})]}),e.verified_at&&(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Verified on"}),(0,r.jsx)("span",{className:"text-gray-900",children:new Date(e.verified_at).toLocaleDateString()})]})]})]}),(0,r.jsxs)("section",{className:"bg-white rounded-xl shadow-sm border p-4 space-y-3",children:[(0,r.jsx)("h2",{className:"text-sm font-semibold text-gray-900",children:"Subscription"}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 text-xs text-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Plan"}),(0,r.jsx)("span",{className:"text-gray-900",children:e.subscription_status||"Not Subscribed"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Started"}),(0,r.jsx)("span",{className:"text-gray-900",children:e.subscribed_at?new Date(e.subscribed_at).toLocaleDateString():"—"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Expires"}),(0,r.jsx)("span",{className:"text-gray-900",children:e.subscription_expires_at?new Date(e.subscription_expires_at).toLocaleDateString():"—"})]})]}),(0,r.jsx)("div",{className:"pt-2",children:(0,r.jsx)("button",{type:"button",className:`inline-flex items-center rounded-full px-3 py-1.5 text-[11px] font-semibold ${b?"bg-emerald-50 text-emerald-700 border border-emerald-200 hover:bg-emerald-100":"bg-amber-50 text-amber-700 border border-amber-200 hover:bg-amber-100"}`,children:b?"Subscribed":"contact out team to active subscription"})})]}),(0,r.jsxs)("section",{className:"bg-white rounded-xl shadow-sm border p-4 space-y-3",children:[(0,r.jsx)("h2",{className:"text-sm font-semibold text-gray-900",children:"Security"}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"Keep your account secure by using a strong password and logging out from shared devices."}),(0,r.jsx)("div",{className:"flex flex-col sm:flex-row gap-2 mt-2",children:(0,r.jsx)("button",{type:"button",onClick:()=>c(!0),className:"inline-flex justify-center items-center rounded-full bg-indigo-600 px-4 py-1.5 text-xs font-semibold text-white shadow hover:bg-indigo-700",children:"Change password"})}),s&&(0,r.jsx)("p",{className:"text-[11px] text-red-600 mt-1 break-words",children:s})]})]}),l&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-sm p-4",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Change password"}),(0,r.jsxs)("form",{className:"space-y-3",onSubmit:g,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Current password"}),(0,r.jsx)("input",{type:"password",className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-indigo-500",value:d,onChange:e=>x(e.target.value),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"New password"}),(0,r.jsx)("input",{type:"password",className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-indigo-500",value:p,onChange:e=>u(e.target.value),required:!0}),(0,r.jsx)("p",{className:"mt-1 text-[11px] text-gray-500",children:"At least 8 characters, ideally with letters, numbers, and a symbol."})]}),m&&(0,r.jsx)("p",{className:"text-[11px] text-red-600",children:m}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[(0,r.jsx)("button",{type:"button",className:"px-3 py-1.5 text-xs rounded-full border border-gray-200 text-gray-700 hover:bg-gray-50",onClick:()=>{c(!1),h(null),x(""),u("")},children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"px-4 py-1.5 text-xs rounded-full bg-indigo-600 text-white font-semibold hover:bg-indigo-700",children:t?"Saving…":"Save profile"})]})]})]})})]})}},78083:(e,t,s)=>{"use strict";s.d(t,{K:()=>a});var r=s(5991);let n=async(e,t)=>{let s=await fetch(e,t);if(!s.ok)throw Error((await s.json()).error||"API request failed");return s},a=(0,r.v)((e,t)=>({veterinary:null,isLoading:!1,error:null,fetchVeterinaryData:async()=>{e({isLoading:!0,error:null});try{let t=await n("/api/veterinary/me",{}),s=await t.json();e({veterinary:s.veterinary,isLoading:!1})}catch(s){let t=s instanceof Error?s.message:"Unknown error";e({error:t,isLoading:!1}),console.error("Error fetching veterinary data:",t)}},updateVeterinary:async(s,r)=>{e({isLoading:!0,error:null});try{await n(`/api/veterinary/${s}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),await t().fetchVeterinaryData(),e({isLoading:!1})}catch(s){let t=s instanceof Error?s.message:"Unknown error";e({error:t,isLoading:!1}),console.error("Error updating veterinary clinic:",t)}},updatePassword:async(t,s,r)=>{e({isLoading:!0,error:null});try{await n(`/api/veterinary/${t}/reset-password`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:s,newPassword:r})}),e({isLoading:!1})}catch(s){let t=s instanceof Error?s.message:"Password update failed";e({error:t,isLoading:!1}),console.error("Error updating veterinary password:",t)}}}))},90311:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(52749).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/chinnu/projects/chipthem/src/app/(pannel)/veterinary/settings/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/chinnu/projects/chipthem/src/app/(pannel)/veterinary/settings/page.tsx","default")}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[3465,9233,5580,7757,937,4954],()=>s(88109));module.exports=r})();