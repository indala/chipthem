(()=>{var e={};e.id=9609,e.ids=[9609],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},30479:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,pages:()=>d,routeModule:()=>x,tree:()=>c});var r=s(38413),i=s(97626),a=s(66308),n=s.n(a),l=s(68819),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["(pannel)",{children:["admin",{children:["manage-users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,44218)),"/home/chinnu/projects/chipthem/src/app/(pannel)/admin/manage-users/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,35594)),"/home/chinnu/projects/chipthem/src/app/(pannel)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35248,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,42025,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,72470,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,99017))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,12282)),"/home/chinnu/projects/chipthem/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35248,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,42025,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,72470,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,99017))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/home/chinnu/projects/chipthem/src/app/(pannel)/admin/manage-users/page.tsx"],p={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/(pannel)/admin/manage-users/page",pathname:"/admin/manage-users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},40990:(e,t,s)=>{Promise.resolve().then(s.bind(s,44218))},81158:(e,t,s)=>{Promise.resolve().then(s.bind(s,25059))},25059:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(76635),i=s(20830),a=s(5991);let n=e=>"owners"===e.type,l=(0,a.v)((e,t)=>({users:[],loading:!1,error:null,actionStatus:{pet:{},clinic:{},user:{}},page:1,hasMore:!0,resetUsers:()=>{e({users:[],page:1,hasMore:!0,error:null,actionStatus:{pet:{},clinic:{},user:{}}})},_setActionStatus:(t,s,r)=>{e(e=>({actionStatus:{...e.actionStatus,[t]:{...e.actionStatus[t],[s]:{...e.actionStatus[t][s],...r}}}}))},fetchOwners:async(s,r)=>{if(!t().loading){e({loading:!0,error:null});try{let i=await fetch(`/api/admin/users?type=owners&page=${s}&limit=10&search=${r}`),a=await i.json();if(!a.success)throw Error(a.error||"Failed to fetch owners.");let n=a.petOwners.map(e=>({...e,type:"owners",name:e.full_name}));e({users:[...t().users,...n],page:s,hasMore:10===n.length,loading:!1})}catch(t){console.error("❌ Fetch owners failed:",t),e({loading:!1,error:t.message})}}},fetchVeterinaries:async(s,r)=>{if(!t().loading){e({loading:!0,error:null});try{let i=await fetch(`/api/admin/users?type=veterinaries&page=${s}&limit=10&search=${r}`),a=await i.json();if(!a.success)throw Error(a.error||"Failed to fetch vets.");let n=a.veterinaries.map(e=>({...e,type:"veterinaries",name:e.clinic_name}));e({users:[...t().users,...n],page:s,hasMore:10===n.length,loading:!1})}catch(t){console.error("❌ Fetch vets failed:",t),e({loading:!1,error:t.message})}}},deletePet:async s=>{t()._setActionStatus("pet",s,{loading:!0,error:null});try{let t=await fetch(`/api/admin/users/pets/${s}`,{method:"DELETE"}),r=await t.json();if(!r.success)throw Error(r.message);e(e=>({users:e.users.map(e=>n(e)?{...e,pets:e.pets?.filter(e=>e.id!==s)||[]}:e),actionStatus:{...e.actionStatus,pet:{...e.actionStatus.pet,[s]:{loading:!1,error:null}}}}))}catch(i){console.error("❌ Delete pet failed:",i);let r=i.message;throw t()._setActionStatus("pet",s,{loading:!1,error:r}),e({error:r}),Error(r)}},updatePet:async(s,r)=>{t()._setActionStatus("pet",s,{loading:!0,error:null});try{let t=await fetch(`/api/admin/users/pets/${s}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),i=await t.json();if(!i.success)throw Error(i.message);e(e=>({users:e.users.map(e=>n(e)?{...e,pets:e.pets?.map(e=>e.id===s?{...e,...r}:e)||[]}:e),actionStatus:{...e.actionStatus,pet:{...e.actionStatus.pet,[s]:{loading:!1,error:null}}}}))}catch(i){console.error("❌ Update pet failed:",i);let r=i.message;throw t()._setActionStatus("pet",s,{loading:!1,error:r}),e({error:r}),Error(r)}},deleteClinic:async s=>{t()._setActionStatus("clinic",s,{loading:!0,error:null});try{let t=await fetch(`/api/admin/users/clinics/${s}`,{method:"DELETE"}),r=await t.json();if(!r.success)throw Error(r.message);e(e=>({users:e.users.filter(e=>e.id!==s),actionStatus:{...e.actionStatus,clinic:{...e.actionStatus.clinic,[s]:{loading:!1,error:null}}}}))}catch(i){console.error("❌ Delete clinic failed:",i);let r=i.message;throw t()._setActionStatus("clinic",s,{loading:!1,error:r}),e({error:r}),Error(r)}},updateClinic:async(s,r)=>{t()._setActionStatus("clinic",s,{loading:!0,error:null});try{let t=await fetch(`/api/admin/users/clinics/${s}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),i=await t.json();if(!i.success)throw Error(i.message);let a=i.clinic;e(e=>({users:e.users.map(e=>e.id===s?{...e,...r,name:a?.clinic_name||e.name}:e),actionStatus:{...e.actionStatus,clinic:{...e.actionStatus.clinic,[s]:{loading:!1,error:null}}}}))}catch(i){console.error("❌ Update clinic failed:",i);let r=i.message;throw t()._setActionStatus("clinic",s,{loading:!1,error:r}),e({error:r}),Error(r)}},updateUserEmail:async(s,r)=>{t()._setActionStatus("user",s,{loading:!0,error:null});try{let t=await fetch(`/api/admin/users/${s}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r})}),i=await t.json();if(!i.success)throw Error(i.message);e(e=>({users:e.users.map(e=>e.id===s?{...e,email:r}:e),actionStatus:{...e.actionStatus,user:{...e.actionStatus.user,[s]:{loading:!1,error:null}}}}))}catch(i){console.error("❌ Update user email failed:",i);let r=i.message;throw t()._setActionStatus("user",s,{loading:!1,error:r}),e({error:r}),Error(r)}}}));var o=s(84734),c=s(53087),d=s(8529);let p=()=>(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]});function x(){let{users:e,fetchOwners:t,fetchVeterinaries:s,loading:a,actionStatus:n,deletePet:x,updatePet:m,updateUserEmail:h,deleteClinic:u,updateClinic:g,error:y,hasMore:f,resetUsers:b,page:j}=l(),w=(0,d.useSearchParams)().get("tab"),[v,N]=(0,i.useState)("veterinaries"===w?"veterinaries":"owners"),[_,S]=(0,i.useState)(""),[P,C]=(0,i.useState)(null),[A,k]=(0,i.useState)(!1),[E,$]=(0,i.useState)(!1),[D,M]=(0,i.useState)(null),O=(0,i.useRef)(null),Y=e=>"owners"===e.type,V=e=>"veterinaries"===e.type,T=(e,t)=>n[e]?.[t]?.loading||!1,z=(0,i.useCallback)((e,r)=>{"owners"===v?t(e,r):s(e,r)},[v,t,s]),F=e=>{C(e),k(!0)},U=e=>{M(e),$(!0)},q=async t=>{if(confirm("Are you sure you want to delete this pet? This cannot be undone."))try{await x(t),c.o.success("Pet deleted successfully.");let s=e.find(e=>Y(e)&&e.pets?.some(e=>e.id===t));s&&Y(s)&&s.pets&&s.pets.length<=1?(b(),z(1,_),k(!1)):C(e=>e?e.filter(e=>e.id!==t):null)}catch(e){c.o.error(`Failed to delete pet: ${e.message}`)}},L=async e=>{let t="owners"===v?"Owner":"Veterinarian";if("veterinaries"===v&&V(e)){if(confirm(`Are you sure you want to delete this ${t} (${e.name})? This cannot be undone.`))try{await u(e.id),c.o.success(`${t} deleted successfully.`),$(!1)}catch(e){c.o.error(`Failed to delete ${t}: ${e.message}`)}}else c.o.error("Owner deletion is forbidden. Please delete pets; if the owner has only one pet, they will be removed automatically.")},G=async(e,t)=>{try{await m(e,t),c.o.success("Pet updated successfully!"),C(s=>s?s.map(s=>s.id===e?{...s,...t}:s):null)}catch(e){c.o.error(`Failed to update pet: ${e.message}`)}},H=async e=>{let t=e.subscription_expires_at?e.subscription_expires_at.split("T")[0]:"",s=prompt(`Enter new subscription expiry for ${e.pet_name} (YYYY-MM-DD):`,t);if(s){if(!/^\d{4}-\d{2}-\d{2}$/.test(s)){c.o.error("Invalid date format. Please use YYYY-MM-DD.");return}let t={subscription_expires_at:new Date(s).toISOString(),subscription_status:"active"};try{await m(e.id,t),c.o.success(`Subscription extended for ${e.pet_name}!`),C(s=>s?s.map(s=>s.id===e.id?{...s,...t}:s):null)}catch(e){c.o.error(`Failed to extend subscription: ${e.message}`)}}},I=async e=>{if(!V(e)){c.o.error("This function only works for veterinary clinics.");return}let t="Clinic",s=e.subscription_expires_at?e.subscription_expires_at.split("T")[0]:"",r=prompt(`Enter new subscription expiry for ${t} ${e.name} (YYYY-MM-DD):`,s);if(r){if(!/^\d{4}-\d{2}-\d{2}$/.test(r)){c.o.error("Invalid date format. Please use YYYY-MM-DD.");return}let s={subscription_expires_at:new Date(r).toISOString(),subscription_status:"active"};try{await g(e.id,s),c.o.success(`${t} subscription extended successfully!`),M(e=>e?{...e,...s}:null)}catch(e){c.o.error(`Failed to extend ${t} subscription: ${e.message}`)}}},J=async e=>{let t=prompt(`Enter new email for ${e.name}:`,e.email);if(t&&t.trim()!==e.email){if(!/\S+@\S+\.\S+/.test(t.trim())){c.o.error("Please enter a valid email address.");return}if(!T("user",e.id))try{await h(e.id,t.trim()),c.o.success("Email updated successfully!")}catch(e){c.o.error(`Failed to update email: ${e.message}`)}}};return(0,r.jsxs)("div",{className:"p-3 sm:p-6 max-w-6xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-xl sm:text-2xl font-bold mb-5",children:"Users Management"}),(0,r.jsx)("div",{className:"flex gap-3 mb-6",children:["owners","veterinaries"].map(e=>(0,r.jsx)("button",{onClick:()=>N(e),className:`px-5 py-2 rounded-full text-sm font-semibold transition shadow ${v===e?"bg-indigo-600 text-white shadow-md hover:bg-indigo-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"owners"===e?"Pet Owners":"Veterinaries"},e))}),(0,r.jsx)("input",{type:"text",placeholder:`Search ${"owners"===v?"owners":"veterinaries"} by name or email...`,value:_,onChange:e=>S(e.target.value),className:"mb-6 p-3 border border-gray-300 rounded-lg w-full max-w-sm focus:ring-indigo-500 focus:border-indigo-500 transition"}),(()=>{let t="owners"===v?e.filter(Y):e.filter(V);return(0,r.jsx)(r.Fragment,{children:a&&0===t.length?(0,r.jsx)("p",{className:"text-base text-gray-500 p-4 bg-gray-50 rounded-lg",children:"Loading users data, please wait..."}):0!==t.length||a?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:hidden",children:t.map(e=>{let t=T("user",e.id),s=T("clinic",e.id),i="owners"===v&&Y(e)&&(e.pets?.length??0)===1;return(0,r.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsx)("h2",{className:"font-bold text-base text-gray-800",children:e.name}),(0,r.jsx)("span",{className:`text-xs px-3 py-1 rounded-full font-semibold flex-shrink-0 ${e.is_verified?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_verified?"Verified":"Unverified"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-3 break-all",children:e.email}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:["veterinaries"===v&&(0,r.jsx)("button",{onClick:()=>U(e),className:"bg-purple-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-purple-700 transition",children:"View Details"}),"owners"===v&&Y(e)&&e.pets&&e.pets.length>0&&(0,r.jsxs)("button",{onClick:()=>F(e.pets),className:"bg-green-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-green-700 transition",children:["View Pets (",e.pets.length,")"]}),(0,r.jsx)("button",{onClick:()=>J(e),disabled:t,className:"bg-blue-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-blue-700 transition flex items-center justify-center",children:t?(0,r.jsx)(p,{}):"Edit Email"}),(0,r.jsx)("button",{onClick:()=>{i?q(e.pets[0].id):L(e)},disabled:"veterinaries"===v&&s,className:`px-3 py-1 rounded-lg text-sm transition flex items-center justify-center ${"veterinaries"!==v||s?"owners"===v&&i?"bg-red-600 text-white hover:bg-red-700":"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700"}`,title:"owners"===v?i?"Delete last pet (owner will be removed automatically).":"Owner has 0 or multiple pets; delete from pet dialog.":"Delete Veterinary",children:s?(0,r.jsx)(p,{}):"owners"===v?"Delete Pet+Owner":"Delete Vet"})]})]},e.id)})}),(0,r.jsx)("div",{className:"hidden sm:block overflow-x-auto rounded-xl shadow-lg",children:(0,r.jsxs)("table",{className:"min-w-full bg-white border-collapse",children:[(0,r.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),"owners"===v&&(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pets"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-100",children:t.map(e=>{let t=T("user",e.id),s=T("clinic",e.id),i="owners"===v&&Y(e)&&(e.pets?.length??0)===1;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50 transition",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 break-all",children:e.email}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${e.is_verified?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_verified?"Verified":"Unverified"})}),"owners"===v&&Y(e)&&(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.pets?.length?(0,r.jsxs)("button",{onClick:()=>F(e.pets),className:"bg-green-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-green-700 transition",children:["View Pets (",e.pets.length,")"]}):(0,r.jsx)("span",{className:"text-gray-500 text-sm italic",children:"No pets"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex gap-2",children:["veterinaries"===v&&(0,r.jsx)("button",{onClick:()=>U(e),className:"bg-purple-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-purple-700 transition",children:"View Details"}),(0,r.jsx)("button",{onClick:()=>J(e),disabled:t,className:"bg-blue-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-blue-700 transition flex items-center justify-center",children:t?(0,r.jsx)(p,{}):"Edit Email"}),(0,r.jsx)("button",{onClick:()=>{i?q(e.pets[0].id):L(e)},disabled:"veterinaries"===v&&s,className:`px-3 py-1 rounded-lg text-sm transition flex items-center justify-center ${"veterinaries"!==v||s?"owners"===v&&i?"bg-red-600 text-white hover:bg-red-700":"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700"}`,title:"owners"===v?i?"Delete last pet (owner will be removed automatically).":"Owner has 0 or multiple pets; delete from pet dialog.":"Delete Veterinary",children:s?(0,r.jsx)(p,{}):"owners"===v?"Delete Pet+Owner":"Delete"})]})})]},e.id)})})]})}),(0,r.jsxs)("div",{ref:O,className:"h-12 flex justify-center items-center",children:[f&&a&&(0,r.jsx)("p",{className:"text-center text-gray-500 py-2 text-sm",children:"Loading more users..."}),!f&&t.length>0&&(0,r.jsx)("p",{className:"text-center text-gray-500 py-2 text-sm",children:"You have reached the end of the list."})]})]}):(0,r.jsxs)("p",{className:"text-base text-gray-500 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:["No ","owners"===v?"Pet Owners":"Veterinaries"," found matching your search."]})})})(),A&&P&&(0,r.jsxs)(o.A,{onClose:()=>k(!1),title:"Owner Details",children:[(()=>{let t=P[0],s=e.find(e=>Y(e)&&Array.isArray(e.pets)&&e.pets.some(e=>e.id===t?.id)),i=t?.owner,a=s?.name??i?.full_name??"Owner",n=s?.city??i?.city,l=s?.country??i?.country,o=s?.email??i?.email,c=s?.phone_number??i?.phone_number;return(0,r.jsx)("div",{className:"mb-4 border border-gray-200 bg-slate-50 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-xl font-bold text-gray-800",children:["Pets of ",a]}),(n||l)&&(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[n||"—",l?`, ${l}`:""]}),s?.is_verified!==void 0&&(0,r.jsx)("p",{className:"mt-1 inline-flex items-center gap-1 text-xs",children:(0,r.jsx)("span",{className:`px-2 py-0.5 rounded-full font-semibold ${s.is_verified?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:s.is_verified?"Verified owner":"Unverified owner"})})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-700 space-y-1",children:[o&&(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Email:"})," ",o]}),c&&(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Phone:"})," ",c]}),i?.street_address&&(0,r.jsx)("p",{className:"text-xs text-gray-500",children:i.street_address})]})]})})})(),(0,r.jsx)("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:P.map(e=>{let t=T("pet",e.id),s=T("pet",e.id);return(0,r.jsxs)("div",{className:"border border-gray-200 bg-white rounded-lg p-4 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-lg font-semibold text-gray-800",children:[e.pet_name," (",e.pet_type,")"]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Pet ID: ",e.id]})]}),(0,r.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-semibold flex-shrink-0 ${e.is_verified?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_verified?"Verified":"Unverified"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm text-gray-700",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Type:"})," ",e.pet_type||"N/A"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Breed:"})," ",e.breed||"N/A"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Sex:"})," ",e.sex||"N/A"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Chip:"})," ",e.microchip_number||"N/A"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Subscription:"})," ",e.subscription_status||"N/A"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Subscription Expires:"})," ",e.subscription_expires_at?new Date(e.subscription_expires_at).toLocaleDateString():"N/A"]})]}),(0,r.jsxs)("div",{className:"flex gap-2 mt-4 flex-wrap",children:[(0,r.jsx)("button",{onClick:()=>{let t=prompt(`Enter new microchip number for ${e.pet_name}:`,e.microchip_number||"");null!==t&&G(e.id,{microchip_number:t})},disabled:t,className:"bg-blue-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-blue-700 transition flex items-center justify-center",children:t?(0,r.jsx)(p,{}):"Edit Chip"}),(0,r.jsx)("button",{onClick:()=>H(e),disabled:t,className:"bg-purple-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-purple-700 transition flex items-center justify-center",children:t?(0,r.jsx)(p,{}):"Extend Sub"}),(0,r.jsx)("button",{onClick:()=>q(e.id),disabled:s,className:"bg-red-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-red-700 transition flex items-center justify-center",children:s?(0,r.jsx)(p,{}):"Delete Pet"})]})]},e.id)})})]}),E&&D&&V(D)&&(0,r.jsx)(o.A,{onClose:()=>$(!1),title:"Veterinary Clinic Details",children:(()=>{let e=T("clinic",D.id);return(0,r.jsxs)("div",{className:"space-y-3 p-4 bg-gray-50 rounded-lg max-h-[70vh] overflow-y-auto text-sm text-gray-800",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Clinic Name:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:D.name||D.clinic_name||"-"})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Contact Person:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:D.contact_person||"-"})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Phone:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:D.phone||"-"})]}),D.alt_phone&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Alt. Phone:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:D.alt_phone})]}),D.website&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Website:"})," ",(0,r.jsx)("a",{href:D.website,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline break-all",children:D.website})]}),"number"==typeof D.years_in_practice&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Years in Practice:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:D.years_in_practice})]}),(0,r.jsx)("hr",{className:"my-2"}),(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:"Location"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Address:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:D.street_address||"-"})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"City:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:D.city||"-"})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"State / Province:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:D.state_province||"-"})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Postal Code:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:D.postal_code||"-"})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Country:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:D.country||"-"})]}),D.google_maps_url&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Maps:"})," ",(0,r.jsx)("a",{href:D.google_maps_url,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline break-all",children:"Open in Google Maps"})]}),(0,r.jsx)("hr",{className:"my-2"}),(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:"Services"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Microchip Services:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:D.microchip_services?"Yes":"No"})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Has Scanners:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:D.has_microchip_scanners?"Yes":"No"})]}),D.scanner_types&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Scanner Types:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:Array.isArray(D.scanner_types)?D.scanner_types.join(", "):D.scanner_types})]}),D.specializations&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Specializations:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:Array.isArray(D.specializations)?D.specializations.join(", "):D.specializations})]}),D.additional_services&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Additional Services:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:Array.isArray(D.additional_services)?D.additional_services.join(", "):D.additional_services})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Operating Hours:"})," ",(0,r.jsx)("span",{className:"text-gray-700 whitespace-pre-line",children:D.operating_hours||"-"})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"24h Emergency:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:D.provides_24h_emergency?"Yes":"No"})]}),(0,r.jsx)("hr",{className:"my-2"}),(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:"Subscription"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Status:"})," ",(0,r.jsx)("span",{className:"text-gray-700 uppercase font-medium",children:D.subscription_status||"None"})]}),(0,r.jsxs)("p",{className:"mb-2",children:[(0,r.jsx)("strong",{children:"Valid Till:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:D.subscription_expires_at?new Date(D.subscription_expires_at).toLocaleDateString():"-"})]}),(0,r.jsx)("div",{className:"flex justify-start",children:(0,r.jsx)("button",{onClick:()=>I(D),disabled:e,className:"bg-purple-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-purple-700 transition flex items-center justify-center disabled:opacity-60",children:e?(0,r.jsx)(p,{}):"Extend Subscription"})})]})})()})]})}},84734:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(76635),i=s(67625),a=s(98800);function n({children:e,onClose:t,title:s}){return(0,r.jsxs)(i.bL,{open:!0,onOpenChange:e=>!e&&t(),children:["a",(0,r.jsx)(i.hJ,{className:"   fixed inset-0    bg-black/40    backdrop-blur-sm    z-[9998]   "}),(0,r.jsxs)(i.UC,{className:"   fixed top-1/2 left-1/2    -translate-x-1/2 -translate-y-1/2   bg-white rounded-xl shadow-xl   w-[90%] max-w-md      /* \uD83D\uDCA5 Fix overflow issue */   max-h-[90vh] overflow-y-auto      /* Smooth scaling animation */   data-[state=open]:animate-in   data-[state=open]:fade-in-0   data-[state=open]:zoom-in-95   data-[state=closed]:animate-out   data-[state=closed]:fade-out-0   data-[state=closed]:zoom-out-95      p-6   z-[9999]   focus:outline-none   ",children:[(0,r.jsx)(i.hE,{className:"text-lg font-semibold mb-3",children:s??"Modal"}),(0,r.jsx)(i.bm,{onClick:t,className:"   absolute top-4 right-4    text-gray-500 hover:text-gray-700    transition   ",children:(0,r.jsx)(a.A,{size:20})}),e]})]})}},44218:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(52749).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/chinnu/projects/chipthem/src/app/(pannel)/admin/manage-users/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/chinnu/projects/chipthem/src/app/(pannel)/admin/manage-users/page.tsx","default")}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[3465,9233,5580,7757,937,3268,4954],()=>s(30479));module.exports=r})();