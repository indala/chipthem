(()=>{var e={};e.id=8405,e.ids=[8405],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},64551:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>a.a,__next_app__:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>l});var i=s(38413),t=s(97626),n=s(66308),a=s.n(n),o=s(68819),c={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);s.d(r,c);let l=["",{children:["(pannel)",{children:["admin",{children:["verifications",{children:["veterinary",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,15870)),"/home/chinnu/projects/chipthem/src/app/(pannel)/admin/verifications/veterinary/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,35594)),"/home/chinnu/projects/chipthem/src/app/(pannel)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35248,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,42025,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,72470,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,99017))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,12282)),"/home/chinnu/projects/chipthem/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35248,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,42025,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,72470,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,99017))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/home/chinnu/projects/chipthem/src/app/(pannel)/admin/verifications/veterinary/page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},x=new i.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/(pannel)/admin/verifications/veterinary/page",pathname:"/admin/verifications/veterinary",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},3032:(e,r,s)=>{Promise.resolve().then(s.bind(s,15870))},3704:(e,r,s)=>{Promise.resolve().then(s.bind(s,3614))},3614:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>y});var i=s(76635),t=s(20830),n=s(5991),a=s(85125);let o=(0,n.v)((e,r)=>({veterinaries:[],page:1,hasMore:!0,loading:!1,error:null,fetchVeterinaries:async(s=!1)=>{if(r().loading)return;e({loading:!0,error:null});let i=s?1:r().page;try{let t=await fetch(`/api/admin/veterinary?page=${i}`),n=await t.json();n.success?e({veterinaries:s?n.veterinary_clinics:[...r().veterinaries,...n.veterinary_clinics],page:i+1,hasMore:n.pagination?.hasMore??!1,loading:!1}):e({loading:!1,error:n.message})}catch(r){console.error("❌ Fetch veterinarians failed:",r),e({loading:!1,error:"Failed to fetch veterinarians."})}},verifyVeterinary:async s=>{try{let i=await fetch(`/api/admin/veterinary/${s}/verify`,{method:"PATCH"}),t=await i.json();if(!t.success)throw Error(t.message);e({veterinaries:r().veterinaries.filter(e=>e.id!==s)}),console.log("✅ Veterinary verified:",t.message)}catch(e){console.error("❌ Verify veterinary failed:",e)}},rejectVeterinary:async s=>{try{let i=await fetch(`/api/admin/veterinary/${s}/reject`,{method:"DELETE"}),t=await i.json();if(!t.success)throw Error(t.message);e({veterinaries:r().veterinaries.filter(e=>e.id!==s)}),console.log("\uD83D\uDDD1️ Veterinary rejected:",t.message)}catch(e){console.error("❌ Reject veterinary failed:",e)}},subscribeRealtime:()=>{let s=a.m.channel("realtime:veterinary_clinics").on("system",{event:"postgres_changes",schema:"public",table:"veterinary_clinics"},s=>{let{eventType:i,new:t,old:n}=s,a=[...r().veterinaries];switch(i){case"INSERT":t&&!a.some(e=>e.id===t.id)&&e({veterinaries:[t,...a]});break;case"UPDATE":t&&e({veterinaries:a.map(e=>e.id===t.id?{...e,...t}:e)});break;case"DELETE":n&&e({veterinaries:a.filter(e=>e.id!==n.id)})}}).subscribe();return()=>{a.m.removeChannel(s)}}}));var c=s(45105),l=s(38124),d=s(15606),m=s(29051),x=s(53087),h=s(81391);let p=({onClick:e,disabled:r,variant:s,size:t,children:n,className:a=""})=>{let o="font-semibold rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 flex items-center justify-center ";return"sm"===t?o+="px-3 py-1 text-sm ":o+="px-4 py-2 ","success"===s?o+="bg-green-600 hover:bg-green-700 text-white focus:ring-green-300":"danger"===s?o+="bg-red-600 hover:bg-red-700 text-white focus:ring-red-300":"outline-primary"===s?o+="border border-indigo-500 text-indigo-600 hover:bg-indigo-50 focus:ring-indigo-200":o+="bg-gray-200 hover:bg-gray-300 text-gray-800 focus:ring-gray-300",r&&(o+=" opacity-50 cursor-not-allowed"),(0,i.jsx)("button",{onClick:e,disabled:r,className:`${o} ${a}`,children:n})};function u({vet:e,index:r,onView:s}){let{verifyVeterinary:t,rejectVeterinary:n}=o();return(0,i.jsxs)(c.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*r},className:"bg-white border border-gray-200 rounded-xl shadow-md p-4 flex flex-col justify-between h-full",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,i.jsx)("h6",{className:"font-semibold text-lg truncate mb-0 text-gray-800",children:e.clinic_name}),e.is_verified?(0,i.jsx)(l.A,{className:"text-green-500",size:20}):"pending"===e.status?(0,i.jsx)(d.A,{className:"text-yellow-500",size:20}):(0,i.jsx)(m.A,{className:"text-red-500",size:20})]}),(0,i.jsxs)("p",{className:"text-gray-500 text-sm mb-1 truncate flex items-center",children:[(0,i.jsx)("span",{className:"mr-1",children:"\uD83D\uDCE7"})," ",e.email]}),e.phone&&(0,i.jsxs)("p",{className:"text-gray-500 text-sm mb-2 truncate flex items-center",children:[(0,i.jsx)("span",{className:"mr-1",children:"\uD83D\uDCDE"})," ",e.phone]}),(0,i.jsxs)("p",{className:"text-gray-500 text-sm mb-3",children:["\uD83E\uDE7A ",e.license_number?`License: ${e.license_number}`:"No license info"]})]}),(0,i.jsxs)("div",{className:"flex justify-between mt-auto space-x-2 pt-3 border-t border-gray-100",children:[(0,i.jsxs)(p,{size:"sm",variant:"outline-primary",onClick:()=>s(e),className:"w-1/3",children:[(0,i.jsx)(h.Ny1,{className:"mr-1"})," View"]}),(0,i.jsxs)(p,{size:"sm",variant:"success",disabled:e.is_verified,onClick:()=>{if(!e.id){x.o.error("Missing veterinary clinic information");return}x.o.promise(t(e.id),{loading:"Verifying clinic...",success:"Clinic verified successfully!",error:"Failed to verify. Please try again."})},className:"w-1/3",children:[(0,i.jsx)(h.A7C,{className:"mr-1"})," Accept"]}),(0,i.jsxs)(p,{size:"sm",variant:"danger",onClick:()=>{if(!e.id){x.o.error("Missing veterinary clinic information");return}x.o.promise(n(e.id),{loading:"Rejecting...",success:"Clinic rejected successfully.",error:"Failed to reject. Please try again."})},className:"w-1/3",children:[(0,i.jsx)(h._Hm,{className:"mr-1"})," Reject"]})]})]},e.id)}var g=s(84734);let f=()=>(0,i.jsx)(h.hW,{className:"animate-spin text-green-600 w-5 h-5 mr-2"}),v=({onClick:e,disabled:r,variant:s,children:t,className:n=""})=>{let a="px-6 py-3 font-semibold rounded-lg transition-all duration-200 focus:outline-none focus:ring-4 ";return"secondary"===s?a+="bg-gray-500 hover:bg-gray-600 text-white focus:ring-gray-300":"outline-secondary"===s?a+="border border-green-300 text-green-700 hover:bg-green-50 focus:ring-green-200":a+="bg-green-600 hover:bg-green-700 text-white focus:ring-green-300",r&&(a+=" opacity-50 cursor-not-allowed"),(0,i.jsx)("button",{onClick:e,disabled:r,className:`${a} ${n} flex items-center justify-center`,children:t})};function y(){let{veterinaries:e,hasMore:r,loading:s}=o(),n=o(e=>e.fetchVeterinaries),a=o(e=>e.subscribeRealtime),[c,l]=(0,t.useState)(null),[d,m]=(0,t.useState)(!1),x=(0,t.useCallback)(e=>{n(e)},[n]);(0,t.useCallback)(()=>a(),[a]);let p=e=>{l(e),m(!0)};return(0,i.jsxs)("div",{className:"p-6 md:p-8 bg-gray-50 min-h-screen",children:[(0,i.jsxs)("h2",{className:"text-3xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,i.jsx)(h.v3G,{className:"mr-3 text-green-600"})," Veterinary Clinic Verification"]}),(0,i.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-6 ",children:e.map((e,r)=>(0,i.jsx)(u,{vet:e,index:r,onView:p},e.id))}),r&&(0,i.jsx)("div",{className:"text-center mt-8",children:(0,i.jsx)(v,{onClick:()=>x(),disabled:s,variant:"outline-secondary",className:"min-w-[200px]",children:s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f,{})," Loading..."]}):"Load More Clinics"})}),d&&c&&(0,i.jsx)(g.A,{onClose:()=>{m(!1),l(null)},title:"Veterinary Clinic Details",children:(0,i.jsxs)("div",{className:"space-y-4 p-2",children:[(0,i.jsx)("div",{className:"text-center mb-4",children:(0,i.jsx)("h6",{className:"text-2xl font-semibold text-green-600",children:c.clinic_name})}),(0,i.jsx)("div",{className:"bg-green-50 p-3 rounded-lg text-center",children:(0,i.jsxs)("p",{className:"font-medium",children:[(0,i.jsx)("strong",{children:"Status:"})," ",(0,i.jsx)("span",{className:`ml-1 font-bold ${c.is_verified?"text-green-700":"text-yellow-600"}`,children:c.is_verified?"Verified":"Unverified"})]})}),(0,i.jsxs)("div",{className:"space-y-3 text-gray-700 mb-6",children:[(0,i.jsxs)("div",{className:"flex items-center text-sm p-2 bg-gray-50 rounded-lg",children:[(0,i.jsx)(h.maD,{className:"mr-3 text-gray-400 w-4 h-4 flex-shrink-0"}),(0,i.jsx)("span",{className:"break-all",children:c.email})]}),c.phone&&(0,i.jsxs)("div",{className:"flex items-center text-sm p-2 bg-gray-50 rounded-lg",children:[(0,i.jsx)(h.dRU,{className:"mr-3 text-gray-400 w-4 h-4 flex-shrink-0"}),c.phone]}),c.city&&(0,i.jsxs)("div",{className:"flex items-center text-sm p-2 bg-gray-50 rounded-lg",children:[(0,i.jsx)(h.vq8,{className:"mr-3 text-gray-400 w-4 h-4 flex-shrink-0"}),c.city,", ",c.country||""]})]}),(0,i.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,i.jsxs)("h6",{className:"text-lg font-bold text-gray-700 mb-4 flex items-center",children:[(0,i.jsx)(h.dr3,{className:"mr-2 text-green-500 w-5 h-5"}),"Additional Information"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"License:"})," ",c.license_number||"N/A"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Years in Practice:"})," ",c.years_in_practice||"N/A"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"24H Emergency:"})," ",(0,i.jsx)("span",{className:c.provides_24h_emergency?"text-green-600 font-medium":"text-red-500",children:c.provides_24h_emergency?"Yes":"No"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Microchip Services:"})," ",(0,i.jsx)("span",{className:c.microchip_services?"text-green-600 font-medium":"text-red-500",children:c.microchip_services?"Yes":"No"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Has Scanners:"})," ",(0,i.jsx)("span",{className:c.has_microchip_scanners?"text-green-600 font-medium":"text-red-500",children:c.has_microchip_scanners?"Yes":"No"})]})]})]})]})})]})}},84734:(e,r,s)=>{"use strict";s.d(r,{A:()=>a});var i=s(76635),t=s(67625),n=s(98800);function a({children:e,onClose:r,title:s}){return(0,i.jsxs)(t.bL,{open:!0,onOpenChange:e=>!e&&r(),children:["a",(0,i.jsx)(t.hJ,{className:"   fixed inset-0    bg-black/40    backdrop-blur-sm    z-[9998]   "}),(0,i.jsxs)(t.UC,{className:"   fixed top-1/2 left-1/2    -translate-x-1/2 -translate-y-1/2   bg-white rounded-xl shadow-xl   w-[90%] max-w-md      /* \uD83D\uDCA5 Fix overflow issue */   max-h-[90vh] overflow-y-auto      /* Smooth scaling animation */   data-[state=open]:animate-in   data-[state=open]:fade-in-0   data-[state=open]:zoom-in-95   data-[state=closed]:animate-out   data-[state=closed]:fade-out-0   data-[state=closed]:zoom-out-95      p-6   z-[9999]   focus:outline-none   ",children:[(0,i.jsx)(t.hE,{className:"text-lg font-semibold mb-3",children:s??"Modal"}),(0,i.jsx)(t.bm,{onClick:r,className:"   absolute top-4 right-4    text-gray-500 hover:text-gray-700    transition   ",children:(0,i.jsx)(n.A,{size:20})}),e]})]})}},85125:(e,r,s)=>{"use strict";s.d(r,{m:()=>i});let i=(0,s(98399).UU)("https://zwqngfcujvsaahykqisj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp3cW5nZmN1anZzYWFoeWtxaXNqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIxNTczNjYsImV4cCI6MjA3NzczMzM2Nn0.TYScA96_QA1pTsZVDty3f4fPDTJRUfbfTtVP9amTuxg")},15870:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>i});let i=(0,s(52749).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/chinnu/projects/chipthem/src/app/(pannel)/admin/verifications/veterinary/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/chinnu/projects/chipthem/src/app/(pannel)/admin/verifications/veterinary/page.tsx","default")}};var r=require("../../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),i=r.X(0,[3465,9233,5580,7757,937,3268,4069,4954],()=>s(64551));module.exports=i})();