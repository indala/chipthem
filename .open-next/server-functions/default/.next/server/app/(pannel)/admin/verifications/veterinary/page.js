(()=>{var e={};e.id=8405,e.ids=[8405],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},64551:(e,i,r)=>{"use strict";r.r(i),r.d(i,{GlobalError:()=>a.a,__next_app__:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>l});var s=r(38413),n=r(97626),t=r(66308),a=r.n(t),c=r(68819),o={};for(let e in c)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>c[e]);r.d(i,o);let l=["",{children:["(pannel)",{children:["admin",{children:["verifications",{children:["veterinary",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,15870)),"/home/chinnu/projects/chipthem/src/app/(pannel)/admin/verifications/veterinary/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,35594)),"/home/chinnu/projects/chipthem/src/app/(pannel)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35248,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,42025,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,72470,23)),"next/dist/client/components/unauthorized-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,12282)),"/home/chinnu/projects/chipthem/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35248,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,42025,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,72470,23)),"next/dist/client/components/unauthorized-error"]}],d=["/home/chinnu/projects/chipthem/src/app/(pannel)/admin/verifications/veterinary/page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/(pannel)/admin/verifications/veterinary/page",pathname:"/admin/verifications/veterinary",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},3032:(e,i,r)=>{Promise.resolve().then(r.bind(r,15870))},3704:(e,i,r)=>{Promise.resolve().then(r.bind(r,3614))},3614:(e,i,r)=>{"use strict";r.r(i),r.d(i,{default:()=>f});var s=r(76635),n=r(20830),t=r(50008),a=r(14475),c=r(84403),o=r(85576),l=r(85125);let d=(0,o.v)((e,i)=>({veterinaries:[],page:1,hasMore:!0,loading:!1,error:null,fetchVeterinaries:async(r=!1)=>{if(i().loading)return;e({loading:!0,error:null});let s=r?1:i().page;try{let n=await fetch(`/api/admin/veterinary?page=${s}`),t=await n.json();t.success?e({veterinaries:r?t.veterinary_clinics:[...i().veterinaries,...t.veterinary_clinics],page:s+1,hasMore:t.pagination?.hasMore??!1,loading:!1}):e({loading:!1,error:t.message})}catch(i){console.error("❌ Fetch veterinarians failed:",i),e({loading:!1,error:"Failed to fetch veterinarians."})}},verifyVeterinary:async r=>{try{let s=await fetch(`/api/admin/veterinary/${r}/verify`,{method:"PATCH"}),n=await s.json();if(!n.success)throw Error(n.message);e({veterinaries:i().veterinaries.map(e=>e.id===r?{...e,is_verified:!0,status:"verified"}:e)}),console.log("✅ Veterinary verified:",n.message)}catch(e){console.error("❌ Verify veterinary failed:",e)}},rejectVeterinary:async r=>{try{let s=await fetch(`/api/admin/veterinary/${r}/reject`,{method:"DELETE"}),n=await s.json();if(!n.success)throw Error(n.message);e({veterinaries:i().veterinaries.filter(e=>e.id!==r)}),console.log("\uD83D\uDDD1️ Veterinary rejected:",n.message)}catch(e){console.error("❌ Reject veterinary failed:",e)}},subscribeRealtime:()=>{let r=l.m.channel("realtime:veterinary_clinics").on("system",{event:"postgres_changes",schema:"public",table:"veterinary_clinics"},r=>{let{eventType:s,new:n,old:t}=r,a=[...i().veterinaries];switch(s){case"INSERT":n&&!a.some(e=>e.id===n.id)&&e({veterinaries:[n,...a]});break;case"UPDATE":n&&e({veterinaries:a.map(e=>e.id===n.id?{...e,...n}:e)});break;case"DELETE":t&&e({veterinaries:a.filter(e=>e.id!==t.id)})}}).subscribe();return()=>{l.m.removeChannel(r)}}}));var m=r(45105),h=r(38124),u=r(15606),p=r(29051),x=r(53087);function v({vet:e,index:i,onView:r}){let{verifyVeterinary:n,rejectVeterinary:a}=d();return(0,s.jsxs)(m.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*i},className:"bg-white border rounded-4 shadow-sm p-3 d-flex flex-column justify-content-between",style:{width:"260px"},children:[(0,s.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,s.jsx)("h6",{className:"fw-semibold text-truncate mb-0",children:e.clinic_name}),e.is_verified?(0,s.jsx)(h.A,{className:"text-success",size:20}):"pending"===e.status?(0,s.jsx)(u.A,{className:"text-warning",size:20}):(0,s.jsx)(p.A,{className:"text-danger",size:20})]}),(0,s.jsxs)("p",{className:"text-muted small mb-1 text-truncate",children:["\uD83D\uDCE7 ",e.email]}),e.phone&&(0,s.jsxs)("p",{className:"text-muted small mb-2 text-truncate",children:["\uD83D\uDCDE ",e.phone]}),(0,s.jsxs)("p",{className:"text-muted small mb-3",children:["\uD83E\uDE7A ",e.license_number?`License: ${e.license_number}`:"No license info"]}),(0,s.jsxs)("div",{className:"d-flex justify-content-between mt-auto",children:[(0,s.jsx)(t.A,{size:"sm",variant:"outline-primary",onClick:()=>r(e),children:"View"}),(0,s.jsx)(t.A,{size:"sm",variant:"success",disabled:e.is_verified,onClick:()=>{if(!e.id){x.o.error("Missing veterinary clinic information");return}x.o.promise(n(e.id),{loading:"Verifying clinic...",success:"Clinic verified successfully!",error:"Failed to verify. Please try again."})},children:"Accept"}),(0,s.jsx)(t.A,{size:"sm",variant:"danger",onClick:()=>{if(!e.id){x.o.error("Missing veterinary clinic information");return}x.o.promise(a(e.id),{loading:"Rejecting...",success:"Clinic rejected successfully.",error:"Failed to reject. Please try again."})},children:"Reject"})]})]},e.id)}function f(){let{veterinaries:e,fetchVeterinaries:i,subscribeRealtime:r,hasMore:o,loading:l}=d(),[m,h]=(0,n.useState)(null),[u,p]=(0,n.useState)(!1),x=e=>{h(e),p(!0)},f=()=>p(!1);return(0,s.jsxs)("div",{className:"p-4 bg-light",children:[(0,s.jsx)("h2",{className:"fw-semibold mb-4",children:"\uD83C\uDFE5 Veterinary Clinic Verification"}),(0,s.jsx)("div",{className:"d-flex flex-wrap gap-3",children:e.map((e,i)=>(0,s.jsx)(v,{vet:e,index:i,onView:x},e.id))}),o&&(0,s.jsx)("div",{className:"text-center mt-4",children:(0,s.jsx)(t.A,{onClick:()=>i(),disabled:l,variant:"outline-secondary",children:l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.A,{animation:"border",size:"sm"})," Loading..."]}):"Load More"})}),(0,s.jsxs)(c.A,{show:u,onHide:f,centered:!0,children:[(0,s.jsx)(c.A.Header,{closeButton:!0,children:(0,s.jsx)(c.A.Title,{children:"Veterinary Clinic Details"})}),(0,s.jsx)(c.A.Body,{children:m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h6",{children:m.clinic_name}),(0,s.jsx)("p",{className:"text-muted mb-2",children:m.email}),m.phone&&(0,s.jsxs)("p",{className:"text-muted mb-2",children:["\uD83D\uDCDE ",m.phone]}),m.city&&(0,s.jsxs)("p",{className:"text-muted",children:["\uD83D\uDCCD ",m.city,", ",m.country||""]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("strong",{children:"Status:"})," ",m.is_verified?"Verified":"Unverified"]}),(0,s.jsx)("h6",{className:"mt-3",children:"\uD83E\uDE7A Clinic Info"}),(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:["License: ",m.license_number||"N/A"]}),(0,s.jsxs)("li",{children:["Years in Practice: ",m.years_in_practice||"N/A"]}),(0,s.jsxs)("li",{children:["Provides 24H Emergency: ",m.provides_24h_emergency?"Yes":"No"]}),(0,s.jsxs)("li",{children:["Microchip Services: ",m.microchip_services?"Yes":"No"]}),(0,s.jsxs)("li",{children:["Has Scanners: ",m.has_microchip_scanners?"Yes":"No"]})]})]}):(0,s.jsx)("div",{className:"text-center py-3",children:(0,s.jsx)(a.A,{animation:"border"})})}),(0,s.jsx)(c.A.Footer,{children:(0,s.jsx)(t.A,{variant:"secondary",onClick:f,children:"Close"})})]})]})}},85125:(e,i,r)=>{"use strict";r.d(i,{m:()=>s});let s=(0,r(98399).UU)("https://zwqngfcujvsaahykqisj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp3cW5nZmN1anZzYWFoeWtxaXNqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIxNTczNjYsImV4cCI6MjA3NzczMzM2Nn0.TYScA96_QA1pTsZVDty3f4fPDTJRUfbfTtVP9amTuxg")},15870:(e,i,r)=>{"use strict";r.r(i),r.d(i,{default:()=>s});let s=(0,r(52749).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/chinnu/projects/chipthem/src/app/(pannel)/admin/verifications/veterinary/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/chinnu/projects/chipthem/src/app/(pannel)/admin/verifications/veterinary/page.tsx","default")}};var i=require("../../../../../webpack-runtime.js");i.C(e);var r=e=>i(i.s=e),s=i.X(0,[4141,9233,5580,1050,8366,877,102],()=>r(64551));module.exports=s})();