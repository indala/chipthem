(()=>{var e={};e.id=6950,e.ids=[6950],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},4786:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>m,routeModule:()=>u,serverHooks:()=>_,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>l});var s={};t.r(s),t.d(s,{GET:()=>p});var i=t(40685),a=t(97626),n=t(93465),o=t(64764),c=t(46674);async function p(e){try{let{searchParams:r}=new URL(e.url),t=Number(r.get("page"))||1,s=Number(r.get("limit"))||10,i=r.get("type")||"all",a=r.get("search")?.trim()||"",n=(t-1)*s,p=n+s-1,u=[],d=[];if("owners"===i||"all"===i){let e=c.L.from("owners").select(`
          id,
          full_name,
          email,
          phone_number,
          street_address,
          city,
          country,
          is_verified,
          status,
          created_at,
          pets (
            id,
            pet_name,
            pet_type,
            breed,
            sex,
            primary_color,
            is_verified,
            status,
            microchip_number,
            subscription_status,
            subscribed_at,
            subscription_expires_at,
            verified_at
          )
          `,{count:"exact"}).eq("is_verified",!0).range(n,p);a&&(e=e.or(`full_name.ilike.%${a}%,email.ilike.%${a}%`));let{data:r,error:t}=await e;if(t)throw t;u=r.map(e=>({...e,pets:e.pets.filter(e=>!0===e.is_verified)}))}if("veterinarians"===i||"veterinaries"===i||"all"===i){let e=c.L.from("veterinary_clinics").select(`
          id,
          clinic_name,
          contact_person,
          email,
          phone,
          alt_phone,
          website,
          license_number,
          years_in_practice,
          specializations,
          additional_services,
          microchip_services,
          has_microchip_scanners,
          scanner_types,
          street_address,
          city,
          state_province,
          postal_code,
          country,
          operating_hours,
          provides_24h_emergency,
          terms_accepted,
          data_accuracy_confirmed,
          professional_confirmation,
          consent_for_referrals,
          email_updates_opt_in,
          is_verified,
          status,
          created_at,
          updated_at,
          verified_at,
          subscription_status,
          subscribed_at,
          subscription_expires_at
          `,{count:"exact"}).eq("is_verified",!0).range(n,p);a&&(e=e.or(`clinic_name.ilike.%${a}%,email.ilike.%${a}%`));let{data:r,error:t}=await e;if(t)throw t;d=r}return o.NextResponse.json({success:!0,page:t,limit:s,petOwners:u,veterinaries:d,hasMore:u.length===s||d.length===s})}catch(e){return console.error("âŒ Fetch paginated users failed:",e),o.NextResponse.json({success:!1,error:e.message},{status:500})}}let u=new i.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/admin/users/route",pathname:"/api/admin/users",filename:"route",bundlePath:"app/api/admin/users/route"},resolvedPagePath:"/home/chinnu/projects/chipthem/src/app/api/admin/users/route.ts",nextConfigOutput:"standalone",userland:s}),{workAsyncStorage:d,workUnitAsyncStorage:l,serverHooks:_}=u;function m(){return(0,n.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:l})}},63814:()=>{},24494:()=>{},46674:(e,r,t)=>{"use strict";t.d(r,{L:()=>s});let s=(0,t(49103).UU)("https://zwqngfcujvsaahykqisj.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[3465,3610,9103],()=>t(4786));module.exports=s})();