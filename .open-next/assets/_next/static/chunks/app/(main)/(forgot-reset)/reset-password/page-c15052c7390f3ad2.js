(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7094],{43241:(e,r,s)=>{Promise.resolve().then(s.bind(s,42287))},95759:(e,r,s)=>{"use strict";var t=s(49719);s.o(t,"usePathname")&&s.d(r,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(r,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(r,{useSearchParams:function(){return t.useSearchParams}})},42287:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>i});var t=s(22194),a=s(4346),n=s(95759),o=s(63233),l=s(19159);function i(){let e=(0,o.c3)("ResetPassword"),r=(0,n.useSearchParams)(),s=(0,n.useRouter)(),i=r.get("token"),[c,u]=(0,a.useState)(""),[d,m]=(0,a.useState)(""),[h,g]=(0,a.useState)(!1),[f,x]=(0,a.useState)(!0),[p,b]=(0,a.useState)(3);(0,a.useEffect)(()=>{if(!i){l.o.error(e("tokenMissing")),x(!1);let r=setInterval(()=>{b(e=>(e<=1&&(clearInterval(r),s.replace("/")),e-1))},1e3)}},[i,e,s]);let w=async r=>{if(r.preventDefault(),!c||!d){l.o.error(e("fillFields"));return}if(c!==d){l.o.error(e("passwordMismatch"));return}if(c.length<6){l.o.error(e("minLength"));return}try{g(!0);let r=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:i,newPassword:c})}),n=await r.json();if(r.ok){l.o.success(e("success"));let r="/login";switch(n.role){case"po":r="/pologin";break;case"v":r="/vlogin";break;case"a":r="/alogin"}setTimeout(()=>s.push(r),1500)}else{var t,a;if(l.o.error(n.message||e("error")),(null===(t=n.message)||void 0===t?void 0:t.toLowerCase().includes("expired"))||(null===(a=n.message)||void 0===a?void 0:a.toLowerCase().includes("invalid"))){x(!1);let e=5,r=setInterval(()=>{(e-=1)<=0&&(clearInterval(r),s.replace("/forgot-password"))},1e3)}}}catch(r){console.error(r),l.o.error(e("networkError"))}finally{g(!1)}};return f?(0,t.jsx)("section",{className:"min-h-screen flex items-center justify-center bg-gray-900 px-4 py-10",children:(0,t.jsxs)("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2 text-center",children:e("title")}),(0,t.jsx)("p",{className:"text-gray-600 text-center mb-6",children:e("subtitle")}),(0,t.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("newPassword")}),(0,t.jsx)("input",{type:"password",name:"newPassword",value:c,onChange:e=>u(e.target.value),required:!0,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-gray-900 outline-none",placeholder:e("newPasswordPlaceholder")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("confirmPassword")}),(0,t.jsx)("input",{type:"password",name:"confirmPassword",value:d,onChange:e=>m(e.target.value),required:!0,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-gray-900 outline-none",placeholder:e("confirmPasswordPlaceholder")})]}),(0,t.jsx)("button",{type:"submit",disabled:h,className:"w-full py-3 bg-gray-900 text-white font-semibold rounded-lg hover:bg-black transition disabled:opacity-50",children:h?e("loading"):e("button")})]}),(0,t.jsx)("p",{className:"mt-6 text-xs text-gray-500 text-center",children:e("note")})]})}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 px-4 py-10",children:(0,t.jsxs)("p",{className:"text-white text-center",children:[e("tokenInvalid"),". Redirecting in ",p," seconds..."]})})}},63233:(e,r,s)=>{"use strict";s.d(r,{c3:()=>n});var t=s(89719);function a(e,r){return(...e)=>{try{return r(...e)}catch{throw Error(void 0)}}}let n=a(0,t.c3);a(0,t.kc)}},e=>{var r=r=>e(e.s=r);e.O(0,[9719,9159,1829,9539,7358],()=>r(43241)),_N_E=e.O()}]);