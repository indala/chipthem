(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9609],{19826:(e,t,s)=>{Promise.resolve().then(s.bind(s,1492))},95759:(e,t,s)=>{"use strict";var r=s(49719);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},1492:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(22194),i=s(4346),a=s(16474);let n=e=>"owners"===e.type,l=(0,a.v)((e,t)=>({users:[],loading:!1,error:null,actionStatus:{pet:{},clinic:{},user:{}},page:1,hasMore:!0,resetUsers:()=>{e({users:[],page:1,hasMore:!0,error:null,actionStatus:{pet:{},clinic:{},user:{}}})},_setActionStatus:(t,s,r)=>{e(e=>({actionStatus:{...e.actionStatus,[t]:{...e.actionStatus[t],[s]:{...e.actionStatus[t][s],...r}}}}))},fetchOwners:async(s,r)=>{if(!t().loading){e({loading:!0,error:null});try{let i=await fetch("/api/admin/users?type=owners&page=".concat(s,"&limit=10&search=").concat(r)),a=await i.json();if(!a.success)throw Error(a.error||"Failed to fetch owners.");let n=a.petOwners.map(e=>({...e,type:"owners",name:e.full_name}));e({users:[...t().users,...n],page:s,hasMore:10===n.length,loading:!1})}catch(t){console.error("❌ Fetch owners failed:",t),e({loading:!1,error:t.message})}}},fetchVeterinaries:async(s,r)=>{if(!t().loading){e({loading:!0,error:null});try{let i=await fetch("/api/admin/users?type=veterinaries&page=".concat(s,"&limit=10&search=").concat(r)),a=await i.json();if(!a.success)throw Error(a.error||"Failed to fetch vets.");let n=a.veterinaries.map(e=>({...e,type:"veterinaries",name:e.clinic_name}));e({users:[...t().users,...n],page:s,hasMore:10===n.length,loading:!1})}catch(t){console.error("❌ Fetch vets failed:",t),e({loading:!1,error:t.message})}}},deletePet:async s=>{t()._setActionStatus("pet",s,{loading:!0,error:null});try{let t=await fetch("/api/admin/users/pets/".concat(s),{method:"DELETE"}),r=await t.json();if(!r.success)throw Error(r.message);e(e=>({users:e.users.map(e=>{if(n(e)){var t;return{...e,pets:(null===(t=e.pets)||void 0===t?void 0:t.filter(e=>e.id!==s))||[]}}return e}),actionStatus:{...e.actionStatus,pet:{...e.actionStatus.pet,[s]:{loading:!1,error:null}}}}))}catch(i){console.error("❌ Delete pet failed:",i);let r=i.message;throw t()._setActionStatus("pet",s,{loading:!1,error:r}),e({error:r}),Error(r)}},updatePet:async(s,r)=>{t()._setActionStatus("pet",s,{loading:!0,error:null});try{let t=await fetch("/api/admin/users/pets/".concat(s),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),i=await t.json();if(!i.success)throw Error(i.message);e(e=>({users:e.users.map(e=>{if(n(e)){var t;return{...e,pets:(null===(t=e.pets)||void 0===t?void 0:t.map(e=>e.id===s?{...e,...r}:e))||[]}}return e}),actionStatus:{...e.actionStatus,pet:{...e.actionStatus.pet,[s]:{loading:!1,error:null}}}}))}catch(i){console.error("❌ Update pet failed:",i);let r=i.message;throw t()._setActionStatus("pet",s,{loading:!1,error:r}),e({error:r}),Error(r)}},deleteClinic:async s=>{t()._setActionStatus("clinic",s,{loading:!0,error:null});try{let t=await fetch("/api/admin/users/clinics/".concat(s),{method:"DELETE"}),r=await t.json();if(!r.success)throw Error(r.message);e(e=>({users:e.users.filter(e=>e.id!==s),actionStatus:{...e.actionStatus,clinic:{...e.actionStatus.clinic,[s]:{loading:!1,error:null}}}}))}catch(i){console.error("❌ Delete clinic failed:",i);let r=i.message;throw t()._setActionStatus("clinic",s,{loading:!1,error:r}),e({error:r}),Error(r)}},updateClinic:async(s,r)=>{t()._setActionStatus("clinic",s,{loading:!0,error:null});try{let t=await fetch("/api/admin/users/clinics/".concat(s),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),i=await t.json();if(!i.success)throw Error(i.message);let a=i.clinic;e(e=>({users:e.users.map(e=>e.id===s?{...e,...r,name:(null==a?void 0:a.clinic_name)||e.name}:e),actionStatus:{...e.actionStatus,clinic:{...e.actionStatus.clinic,[s]:{loading:!1,error:null}}}}))}catch(i){console.error("❌ Update clinic failed:",i);let r=i.message;throw t()._setActionStatus("clinic",s,{loading:!1,error:r}),e({error:r}),Error(r)}},updateUserEmail:async(s,r)=>{t()._setActionStatus("user",s,{loading:!0,error:null});try{let t=await fetch("/api/admin/users/".concat(s),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r})}),i=await t.json();if(!i.success)throw Error(i.message);e(e=>({users:e.users.map(e=>e.id===s?{...e,email:r}:e),actionStatus:{...e.actionStatus,user:{...e.actionStatus.user,[s]:{loading:!1,error:null}}}}))}catch(i){console.error("❌ Update user email failed:",i);let r=i.message;throw t()._setActionStatus("user",s,{loading:!1,error:r}),e({error:r}),Error(r)}}}));var o=s(10840),c=s(19159),d=s(95759);let x=()=>(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]});function p(){let{users:e,fetchOwners:t,fetchVeterinaries:s,loading:a,actionStatus:n,deletePet:p,updatePet:u,updateUserEmail:h,deleteClinic:m,updateClinic:g,error:y,hasMore:f,resetUsers:j,page:b}=l(),w=(0,d.useSearchParams)().get("tab"),[v,N]=(0,i.useState)("veterinaries"===w?"veterinaries":"owners"),[_,S]=(0,i.useState)(""),[C,E]=(0,i.useState)(null),[A,k]=(0,i.useState)(!1),[P,D]=(0,i.useState)(!1),[O,Y]=(0,i.useState)(null),M=(0,i.useRef)(null),V=e=>"owners"===e.type,T=e=>"veterinaries"===e.type,F=(e,t)=>{var s,r;return(null===(r=n[e])||void 0===r?void 0:null===(s=r[t])||void 0===s?void 0:s.loading)||!1},z=(0,i.useCallback)((e,r)=>{"owners"===v?t(e,r):s(e,r)},[v,t,s]);(0,i.useEffect)(()=>{y&&c.o.error(y)},[y]),(0,i.useEffect)(()=>{j(),z(1,_)},[v,_,j,z]),(0,i.useEffect)(()=>{if(!f||a||0===e.length)return;let t=new IntersectionObserver(e=>{e[0].isIntersecting&&z(b+1,_)},{threshold:.8}),s=M.current;return s&&t.observe(s),()=>{s&&t.unobserve(s)}},[f,a,b,z,_,e.length]);let U=e=>{E(e),k(!0)},L=e=>{Y(e),D(!0)},I=async t=>{if(confirm("Are you sure you want to delete this pet? This cannot be undone."))try{await p(t),c.o.success("Pet deleted successfully.");let s=e.find(e=>{var s;return V(e)&&(null===(s=e.pets)||void 0===s?void 0:s.some(e=>e.id===t))});s&&V(s)&&s.pets&&s.pets.length<=1?(j(),z(1,_),k(!1)):E(e=>e?e.filter(e=>e.id!==t):null)}catch(e){c.o.error("Failed to delete pet: ".concat(e.message))}},H=async e=>{let t="owners"===v?"Owner":"Veterinarian";if("veterinaries"===v&&T(e)){if(confirm("Are you sure you want to delete this ".concat(t," (").concat(e.name,")? This cannot be undone.")))try{await m(e.id),c.o.success("".concat(t," deleted successfully.")),D(!1)}catch(e){c.o.error("Failed to delete ".concat(t,": ").concat(e.message))}}else c.o.error("Owner deletion is forbidden. Please delete pets; if the owner has only one pet, they will be removed automatically.")},J=async(e,t)=>{try{await u(e,t),c.o.success("Pet updated successfully!"),E(s=>s?s.map(s=>s.id===e?{...s,...t}:s):null)}catch(e){c.o.error("Failed to update pet: ".concat(e.message))}},R=async e=>{let t=e.subscription_expires_at?e.subscription_expires_at.split("T")[0]:"",s=prompt("Enter new subscription expiry for ".concat(e.pet_name," (YYYY-MM-DD):"),t);if(s){if(!/^\d{4}-\d{2}-\d{2}$/.test(s)){c.o.error("Invalid date format. Please use YYYY-MM-DD.");return}let t={subscription_expires_at:new Date(s).toISOString(),subscription_status:"active"};try{await u(e.id,t),c.o.success("Subscription extended for ".concat(e.pet_name,"!")),E(s=>s?s.map(s=>s.id===e.id?{...s,...t}:s):null)}catch(e){c.o.error("Failed to extend subscription: ".concat(e.message))}}},B=async e=>{if(!T(e)){c.o.error("This function only works for veterinary clinics.");return}let t="Clinic",s=e.subscription_expires_at?e.subscription_expires_at.split("T")[0]:"",r=prompt("Enter new subscription expiry for ".concat(t," ").concat(e.name," (YYYY-MM-DD):"),s);if(r){if(!/^\d{4}-\d{2}-\d{2}$/.test(r)){c.o.error("Invalid date format. Please use YYYY-MM-DD.");return}let s={subscription_expires_at:new Date(r).toISOString(),subscription_status:"active"};try{await g(e.id,s),c.o.success("".concat(t," subscription extended successfully!")),Y(e=>e?{...e,...s}:null)}catch(e){c.o.error("Failed to extend ".concat(t," subscription: ").concat(e.message))}}},W=async e=>{let t=prompt("Enter new email for ".concat(e.name,":"),e.email);if(t&&t.trim()!==e.email){if(!/\S+@\S+\.\S+/.test(t.trim())){c.o.error("Please enter a valid email address.");return}if(!F("user",e.id))try{await h(e.id,t.trim()),c.o.success("Email updated successfully!")}catch(e){c.o.error("Failed to update email: ".concat(e.message))}}};return(0,r.jsxs)("div",{className:"p-3 sm:p-6 max-w-6xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-xl sm:text-2xl font-bold mb-5",children:"Users Management"}),(0,r.jsx)("div",{className:"flex gap-3 mb-6",children:["owners","veterinaries"].map(e=>(0,r.jsx)("button",{onClick:()=>N(e),className:"px-5 py-2 rounded-full text-sm font-semibold transition shadow ".concat(v===e?"bg-indigo-600 text-white shadow-md hover:bg-indigo-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"owners"===e?"Pet Owners":"Veterinaries"},e))}),(0,r.jsx)("input",{type:"text",placeholder:"Search ".concat("owners"===v?"owners":"veterinaries"," by name or email..."),value:_,onChange:e=>S(e.target.value),className:"mb-6 p-3 border border-gray-300 rounded-lg w-full max-w-sm focus:ring-indigo-500 focus:border-indigo-500 transition"}),(()=>{let t="owners"===v?e.filter(V):e.filter(T);return(0,r.jsx)(r.Fragment,{children:a&&0===t.length?(0,r.jsx)("p",{className:"text-base text-gray-500 p-4 bg-gray-50 rounded-lg",children:"Loading users data, please wait..."}):0!==t.length||a?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:hidden",children:t.map(e=>{var t,s;let i=F("user",e.id),a=F("clinic",e.id),n="owners"===v&&V(e)&&(null!==(s=null===(t=e.pets)||void 0===t?void 0:t.length)&&void 0!==s?s:0)===1;return(0,r.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsx)("h2",{className:"font-bold text-base text-gray-800",children:e.name}),(0,r.jsx)("span",{className:"text-xs px-3 py-1 rounded-full font-semibold flex-shrink-0 ".concat(e.is_verified?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.is_verified?"Verified":"Unverified"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-3 break-all",children:e.email}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:["veterinaries"===v&&(0,r.jsx)("button",{onClick:()=>L(e),className:"bg-purple-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-purple-700 transition",children:"View Details"}),"owners"===v&&V(e)&&e.pets&&e.pets.length>0&&(0,r.jsxs)("button",{onClick:()=>U(e.pets),className:"bg-green-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-green-700 transition",children:["View Pets (",e.pets.length,")"]}),(0,r.jsx)("button",{onClick:()=>W(e),disabled:i,className:"bg-blue-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-blue-700 transition flex items-center justify-center",children:i?(0,r.jsx)(x,{}):"Edit Email"}),(0,r.jsx)("button",{onClick:()=>{n?I(e.pets[0].id):H(e)},disabled:"veterinaries"===v&&a,className:"px-3 py-1 rounded-lg text-sm transition flex items-center justify-center ".concat("veterinaries"!==v||a?"owners"===v&&n?"bg-red-600 text-white hover:bg-red-700":"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700"),title:"owners"===v?n?"Delete last pet (owner will be removed automatically).":"Owner has 0 or multiple pets; delete from pet dialog.":"Delete Veterinary",children:a?(0,r.jsx)(x,{}):"owners"===v?"Delete Pet+Owner":"Delete Vet"})]})]},e.id)})}),(0,r.jsx)("div",{className:"hidden sm:block overflow-x-auto rounded-xl shadow-lg",children:(0,r.jsxs)("table",{className:"min-w-full bg-white border-collapse",children:[(0,r.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),"owners"===v&&(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pets"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-100",children:t.map(e=>{var t,s,i;let a=F("user",e.id),n=F("clinic",e.id),l="owners"===v&&V(e)&&(null!==(i=null===(t=e.pets)||void 0===t?void 0:t.length)&&void 0!==i?i:0)===1;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50 transition",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 break-all",children:e.email}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(e.is_verified?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.is_verified?"Verified":"Unverified"})}),"owners"===v&&V(e)&&(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(null===(s=e.pets)||void 0===s?void 0:s.length)?(0,r.jsxs)("button",{onClick:()=>U(e.pets),className:"bg-green-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-green-700 transition",children:["View Pets (",e.pets.length,")"]}):(0,r.jsx)("span",{className:"text-gray-500 text-sm italic",children:"No pets"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex gap-2",children:["veterinaries"===v&&(0,r.jsx)("button",{onClick:()=>L(e),className:"bg-purple-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-purple-700 transition",children:"View Details"}),(0,r.jsx)("button",{onClick:()=>W(e),disabled:a,className:"bg-blue-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-blue-700 transition flex items-center justify-center",children:a?(0,r.jsx)(x,{}):"Edit Email"}),(0,r.jsx)("button",{onClick:()=>{l?I(e.pets[0].id):H(e)},disabled:"veterinaries"===v&&n,className:"px-3 py-1 rounded-lg text-sm transition flex items-center justify-center ".concat("veterinaries"!==v||n?"owners"===v&&l?"bg-red-600 text-white hover:bg-red-700":"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700"),title:"owners"===v?l?"Delete last pet (owner will be removed automatically).":"Owner has 0 or multiple pets; delete from pet dialog.":"Delete Veterinary",children:n?(0,r.jsx)(x,{}):"owners"===v?"Delete Pet+Owner":"Delete"})]})})]},e.id)})})]})}),(0,r.jsxs)("div",{ref:M,className:"h-12 flex justify-center items-center",children:[f&&a&&(0,r.jsx)("p",{className:"text-center text-gray-500 py-2 text-sm",children:"Loading more users..."}),!f&&t.length>0&&(0,r.jsx)("p",{className:"text-center text-gray-500 py-2 text-sm",children:"You have reached the end of the list."})]})]}):(0,r.jsxs)("p",{className:"text-base text-gray-500 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:["No ","owners"===v?"Pet Owners":"Veterinaries"," found matching your search."]})})})(),A&&C&&(0,r.jsxs)(o.A,{onClose:()=>k(!1),title:"Owner Details",children:[(()=>{var t,s,i,a,n,l;let o=C[0],c=e.find(e=>V(e)&&Array.isArray(e.pets)&&e.pets.some(e=>e.id===(null==o?void 0:o.id))),d=null==o?void 0:o.owner,x=null!==(s=null!==(t=null==c?void 0:c.name)&&void 0!==t?t:null==d?void 0:d.full_name)&&void 0!==s?s:"Owner",p=null!==(i=null==c?void 0:c.city)&&void 0!==i?i:null==d?void 0:d.city,u=null!==(a=null==c?void 0:c.country)&&void 0!==a?a:null==d?void 0:d.country,h=null!==(n=null==c?void 0:c.email)&&void 0!==n?n:null==d?void 0:d.email,m=null!==(l=null==c?void 0:c.phone_number)&&void 0!==l?l:null==d?void 0:d.phone_number;return(0,r.jsx)("div",{className:"mb-4 border border-gray-200 bg-slate-50 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-xl font-bold text-gray-800",children:["Pets of ",x]}),(p||u)&&(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[p||"—",u?", ".concat(u):""]}),(null==c?void 0:c.is_verified)!==void 0&&(0,r.jsx)("p",{className:"mt-1 inline-flex items-center gap-1 text-xs",children:(0,r.jsx)("span",{className:"px-2 py-0.5 rounded-full font-semibold ".concat(c.is_verified?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"),children:c.is_verified?"Verified owner":"Unverified owner"})})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-700 space-y-1",children:[h&&(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Email:"})," ",h]}),m&&(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Phone:"})," ",m]}),(null==d?void 0:d.street_address)&&(0,r.jsx)("p",{className:"text-xs text-gray-500",children:d.street_address})]})]})})})(),(0,r.jsx)("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:C.map(e=>{let t=F("pet",e.id),s=F("pet",e.id);return(0,r.jsxs)("div",{className:"border border-gray-200 bg-white rounded-lg p-4 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-lg font-semibold text-gray-800",children:[e.pet_name," (",e.pet_type,")"]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Pet ID: ",e.id]})]}),(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold flex-shrink-0 ".concat(e.is_verified?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.is_verified?"Verified":"Unverified"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm text-gray-700",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Type:"})," ",e.pet_type||"N/A"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Breed:"})," ",e.breed||"N/A"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Sex:"})," ",e.sex||"N/A"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Chip:"})," ",e.microchip_number||"N/A"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Subscription:"})," ",e.subscription_status||"N/A"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Subscription Expires:"})," ",e.subscription_expires_at?new Date(e.subscription_expires_at).toLocaleDateString():"N/A"]})]}),(0,r.jsxs)("div",{className:"flex gap-2 mt-4 flex-wrap",children:[(0,r.jsx)("button",{onClick:()=>{let t=prompt("Enter new microchip number for ".concat(e.pet_name,":"),e.microchip_number||"");null!==t&&J(e.id,{microchip_number:t})},disabled:t,className:"bg-blue-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-blue-700 transition flex items-center justify-center",children:t?(0,r.jsx)(x,{}):"Edit Chip"}),(0,r.jsx)("button",{onClick:()=>R(e),disabled:t,className:"bg-purple-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-purple-700 transition flex items-center justify-center",children:t?(0,r.jsx)(x,{}):"Extend Sub"}),(0,r.jsx)("button",{onClick:()=>I(e.id),disabled:s,className:"bg-red-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-red-700 transition flex items-center justify-center",children:s?(0,r.jsx)(x,{}):"Delete Pet"})]})]},e.id)})})]}),P&&O&&T(O)&&(0,r.jsx)(o.A,{onClose:()=>D(!1),title:"Veterinary Clinic Details",children:(()=>{let e=F("clinic",O.id);return(0,r.jsxs)("div",{className:"space-y-3 p-4 bg-gray-50 rounded-lg max-h-[70vh] overflow-y-auto text-sm text-gray-800",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Clinic Name:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:O.name||O.clinic_name||"-"})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Contact Person:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:O.contact_person||"-"})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Phone:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:O.phone||"-"})]}),O.alt_phone&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Alt. Phone:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:O.alt_phone})]}),O.website&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Website:"})," ",(0,r.jsx)("a",{href:O.website,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline break-all",children:O.website})]}),"number"==typeof O.years_in_practice&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Years in Practice:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:O.years_in_practice})]}),(0,r.jsx)("hr",{className:"my-2"}),(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:"Location"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Address:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:O.street_address||"-"})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"City:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:O.city||"-"})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"State / Province:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:O.state_province||"-"})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Postal Code:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:O.postal_code||"-"})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Country:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:O.country||"-"})]}),O.google_maps_url&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Maps:"})," ",(0,r.jsx)("a",{href:O.google_maps_url,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline break-all",children:"Open in Google Maps"})]}),(0,r.jsx)("hr",{className:"my-2"}),(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:"Services"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Microchip Services:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:O.microchip_services?"Yes":"No"})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Has Scanners:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:O.has_microchip_scanners?"Yes":"No"})]}),O.scanner_types&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Scanner Types:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:Array.isArray(O.scanner_types)?O.scanner_types.join(", "):O.scanner_types})]}),O.specializations&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Specializations:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:Array.isArray(O.specializations)?O.specializations.join(", "):O.specializations})]}),O.additional_services&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Additional Services:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:Array.isArray(O.additional_services)?O.additional_services.join(", "):O.additional_services})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Operating Hours:"})," ",(0,r.jsx)("span",{className:"text-gray-700 whitespace-pre-line",children:O.operating_hours||"-"})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"24h Emergency:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:O.provides_24h_emergency?"Yes":"No"})]}),(0,r.jsx)("hr",{className:"my-2"}),(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:"Subscription"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Status:"})," ",(0,r.jsx)("span",{className:"text-gray-700 uppercase font-medium",children:O.subscription_status||"None"})]}),(0,r.jsxs)("p",{className:"mb-2",children:[(0,r.jsx)("strong",{children:"Valid Till:"})," ",(0,r.jsx)("span",{className:"text-gray-700",children:O.subscription_expires_at?new Date(O.subscription_expires_at).toLocaleDateString():"-"})]}),(0,r.jsx)("div",{className:"flex justify-start",children:(0,r.jsx)("button",{onClick:()=>B(O),disabled:e,className:"bg-purple-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-purple-700 transition flex items-center justify-center disabled:opacity-60",children:e?(0,r.jsx)(x,{}):"Extend Subscription"})})]})})()})]})}},10840:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(22194),i=s(94142),a=s(57284);function n(e){let{children:t,onClose:s,title:n}=e;return(0,r.jsxs)(i.bL,{open:!0,onOpenChange:e=>!e&&s(),children:["a",(0,r.jsx)(i.hJ,{className:"   fixed inset-0    bg-black/40    backdrop-blur-sm    z-[9998]   "}),(0,r.jsxs)(i.UC,{className:"   fixed top-1/2 left-1/2    -translate-x-1/2 -translate-y-1/2   bg-white rounded-xl shadow-xl   w-[90%] max-w-md      /* \uD83D\uDCA5 Fix overflow issue */   max-h-[90vh] overflow-y-auto      /* Smooth scaling animation */   data-[state=open]:animate-in   data-[state=open]:fade-in-0   data-[state=open]:zoom-in-95   data-[state=closed]:animate-out   data-[state=closed]:fade-out-0   data-[state=closed]:zoom-out-95      p-6   z-[9999]   focus:outline-none   ",children:[(0,r.jsx)(i.hE,{className:"text-lg font-semibold mb-3",children:null!=n?n:"Modal"}),(0,r.jsx)(i.bm,{onClick:s,className:"   absolute top-4 right-4    text-gray-500 hover:text-gray-700    transition   ",children:(0,r.jsx)(a.A,{size:20})}),t]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[9159,4688,1829,9539,7358],()=>t(19826)),_N_E=e.O()}]);