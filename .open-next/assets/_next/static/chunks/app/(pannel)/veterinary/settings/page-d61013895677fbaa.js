(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3336],{64263:(e,s,t)=>{Promise.resolve().then(t.bind(t,1753))},1753:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var a=t(22194),r=t(4346),n=t(30009);function i(){let{veterinary:e,isLoading:s,error:t,fetchVeterinaryData:i,updatePassword:l}=(0,n.K)(),[c,o]=(0,r.useState)(!1),[d,x]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),[g,p]=(0,r.useState)(null);(0,r.useEffect)(()=>{e||i()},[e,i]);let b=async s=>{if(s.preventDefault(),null==e?void 0:e.id){if(p(null),u.length<8){p("New password must be at least 8 characters long.");return}await l(e.id,d,u),x(""),m(""),o(!1)}};if(s&&!e)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Loading settings…"})});if(t&&!e)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsx)("p",{className:"text-red-600 text-sm",children:t})});if(!e)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"No account data found."})});let h=e.subscription_status&&"not subscribed"!==e.subscription_status.toLowerCase();return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"border-b bg-white",children:(0,a.jsxs)("div",{className:"max-w-3xl mx-auto px-4 py-4",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Settings"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Manage your account security and subscription status."})]})}),(0,a.jsxs)("main",{className:"max-w-3xl mx-auto px-4 py-6 space-y-6",children:[(0,a.jsxs)("section",{className:"bg-white rounded-xl shadow-sm border p-4 space-y-3",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-gray-900",children:"Account status"}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 text-xs text-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Verification"}),(0,a.jsx)("span",{className:"inline-flex items-center rounded-full px-3 py-1 text-[11px] font-medium ".concat(e.is_verified?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"),children:e.is_verified?"Verified clinic":"Pending verification"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Status"}),(0,a.jsx)("span",{className:"text-gray-900 capitalize",children:e.status||"pending"})]}),e.verified_at&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Verified on"}),(0,a.jsx)("span",{className:"text-gray-900",children:new Date(e.verified_at).toLocaleDateString()})]})]})]}),(0,a.jsxs)("section",{className:"bg-white rounded-xl shadow-sm border p-4 space-y-3",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-gray-900",children:"Subscription"}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 text-xs text-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Plan"}),(0,a.jsx)("span",{className:"text-gray-900",children:e.subscription_status||"Not Subscribed"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Started"}),(0,a.jsx)("span",{className:"text-gray-900",children:e.subscribed_at?new Date(e.subscribed_at).toLocaleDateString():"—"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Expires"}),(0,a.jsx)("span",{className:"text-gray-900",children:e.subscription_expires_at?new Date(e.subscription_expires_at).toLocaleDateString():"—"})]})]}),(0,a.jsx)("div",{className:"pt-2",children:(0,a.jsx)("button",{type:"button",className:"inline-flex items-center rounded-full px-3 py-1.5 text-[11px] font-semibold ".concat(h?"bg-emerald-50 text-emerald-700 border border-emerald-200 hover:bg-emerald-100":"bg-amber-50 text-amber-700 border border-amber-200 hover:bg-amber-100"),children:h?"Subscribed":"contact out team to active subscription"})})]}),(0,a.jsxs)("section",{className:"bg-white rounded-xl shadow-sm border p-4 space-y-3",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-gray-900",children:"Security"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Keep your account secure by using a strong password and logging out from shared devices."}),(0,a.jsx)("div",{className:"flex flex-col sm:flex-row gap-2 mt-2",children:(0,a.jsx)("button",{type:"button",onClick:()=>o(!0),className:"inline-flex justify-center items-center rounded-full bg-indigo-600 px-4 py-1.5 text-xs font-semibold text-white shadow hover:bg-indigo-700",children:"Change password"})}),t&&(0,a.jsx)("p",{className:"text-[11px] text-red-600 mt-1 break-words",children:t})]})]}),c&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-sm p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Change password"}),(0,a.jsxs)("form",{className:"space-y-3",onSubmit:b,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Current password"}),(0,a.jsx)("input",{type:"password",className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-indigo-500",value:d,onChange:e=>x(e.target.value),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"New password"}),(0,a.jsx)("input",{type:"password",className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-indigo-500",value:u,onChange:e=>m(e.target.value),required:!0}),(0,a.jsx)("p",{className:"mt-1 text-[11px] text-gray-500",children:"At least 8 characters, ideally with letters, numbers, and a symbol."})]}),g&&(0,a.jsx)("p",{className:"text-[11px] text-red-600",children:g}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[(0,a.jsx)("button",{type:"button",className:"px-3 py-1.5 text-xs rounded-full border border-gray-200 text-gray-700 hover:bg-gray-50",onClick:()=>{o(!1),p(null),x(""),m("")},children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-1.5 text-xs rounded-full bg-indigo-600 text-white font-semibold hover:bg-indigo-700",children:s?"Saving…":"Save profile"})]})]})]})})]})}},30009:(e,s,t)=>{"use strict";t.d(s,{K:()=>n});var a=t(16474);let r=async(e,s)=>{let t=await fetch(e,s);if(!t.ok)throw Error((await t.json()).error||"API request failed");return t},n=(0,a.v)((e,s)=>({veterinary:null,isLoading:!1,error:null,fetchVeterinaryData:async()=>{e({isLoading:!0,error:null});try{let s=await r("/api/veterinary/me",{}),t=await s.json();e({veterinary:t.veterinary,isLoading:!1})}catch(t){let s=t instanceof Error?t.message:"Unknown error";e({error:s,isLoading:!1}),console.error("Error fetching veterinary data:",s)}},updateVeterinary:async(t,a)=>{e({isLoading:!0,error:null});try{await r("/api/veterinary/".concat(t),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),await s().fetchVeterinaryData(),e({isLoading:!1})}catch(t){let s=t instanceof Error?t.message:"Unknown error";e({error:s,isLoading:!1}),console.error("Error updating veterinary clinic:",s)}},updatePassword:async(s,t,a)=>{e({isLoading:!0,error:null});try{await r("/api/veterinary/".concat(s,"/reset-password"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:t,newPassword:a})}),e({isLoading:!1})}catch(t){let s=t instanceof Error?t.message:"Password update failed";e({error:s,isLoading:!1}),console.error("Error updating veterinary password:",s)}}}))},16474:(e,s,t)=>{"use strict";t.d(s,{v:()=>c});var a=t(4346);let r=e=>{let s;let t=new Set,a=(e,a)=>{let r="function"==typeof e?e(s):e;if(!Object.is(r,s)){let e=s;s=(null!=a?a:"object"!=typeof r||null===r)?r:Object.assign({},s,r),t.forEach(t=>t(s,e))}},r=()=>s,n={setState:a,getState:r,getInitialState:()=>i,subscribe:e=>(t.add(e),()=>t.delete(e))},i=s=e(a,r,n);return n},n=e=>e?r(e):r,i=e=>e,l=e=>{let s=n(e),t=e=>(function(e,s=i){let t=a.useSyncExternalStore(e.subscribe,a.useCallback(()=>s(e.getState()),[e,s]),a.useCallback(()=>s(e.getInitialState()),[e,s]));return a.useDebugValue(t),t})(s,e);return Object.assign(t,s),t},c=e=>e?l(e):l}},e=>{var s=s=>e(e.s=s);e.O(0,[1829,9539,7358],()=>s(64263)),_N_E=e.O()}]);