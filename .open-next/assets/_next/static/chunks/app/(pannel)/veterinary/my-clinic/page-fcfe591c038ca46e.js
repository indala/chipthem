(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4754],{76447:(e,t,r)=>{Promise.resolve().then(r.bind(r,12321))},41108:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var s=r(95653),a=r.n(s)},95653:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let s=r(8322)._(r(55869));function a(e,t){var r;let a={};"function"==typeof e&&(a.loader=e);let n={...a,...t};return(0,s.default)({...n,modules:null==(r=n.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},32130:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let s=r(78734);function a(e){let{reason:t,children:r}=e;if("undefined"==typeof window)throw new s.BailoutToCSRError(t);return r}},55869:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let s=r(22194),a=r(4346),n=r(32130),l=r(7663);function i(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},c=function(e){let t={...o,...e},r=(0,a.lazy)(()=>t.loader().then(i)),c=t.loading;function d(e){let i=c?(0,s.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,o=!t.ssr||!!t.loading,d=o?a.Suspense:a.Fragment,u=t.ssr?(0,s.jsxs)(s.Fragment,{children:["undefined"==typeof window?(0,s.jsx)(l.PreloadChunks,{moduleIds:t.modules}):null,(0,s.jsx)(r,{...e})]}):(0,s.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,s.jsx)(r,{...e})});return(0,s.jsx)(d,{...o?{fallback:i}:{},children:u})}return d.displayName="LoadableComponent",d}},7663:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return i}});let s=r(22194),a=r(38983),n=r(23312),l=r(85453);function i(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let r=n.workAsyncStorage.getStore();if(void 0===r)return null;let i=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files;i.push(...t)}}return 0===i.length?null:(0,s.jsx)(s.Fragment,{children:i.map(e=>{let t=r.assetPrefix+"/_next/"+(0,l.encodeURIPath)(e);return e.endsWith(".css")?(0,s.jsx)("link",{precedence:"dynamic",href:t,rel:"stylesheet",as:"style"},e):((0,a.preload)(t,{as:"script",fetchPriority:"low"}),null)})})}},12321:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(22194),a=r(4346),n=r(41108),l=r(30009);let i=(0,n.default)(()=>Promise.all([r.e(8550),r.e(4287)]).then(r.bind(r,54287)),{loadableGenerated:{webpack:()=>[54287]},ssr:!1,loading:()=>(0,s.jsx)("div",{className:"flex items-center justify-center h-full bg-gray-50",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-emerald-500 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Loading map..."})]})})});function o(){let{veterinary:e,isLoading:t,error:r,fetchVeterinaryData:n,updateVeterinary:o}=(0,l.K)(),[c,d]=(0,a.useState)({clinic_name:"",street_address:"",city:"",state_province:"",postal_code:"",country:"",google_maps_url:"",latitude:"",longitude:"",operating_hours:"",provides_24h_emergency:!1,microchip_services:!1,has_microchip_scanners:!1,website:"",phone:"",alt_phone:"",years_in_practice:"",specializations:"",additional_services:"",scanner_types:""}),[u,m]=(0,a.useState)(null),[x,p]=(0,a.useState)(!1),[g,h]=(0,a.useState)("");(0,a.useEffect)(()=>{e||n()},[e,n]),(0,a.useEffect)(()=>{if(e&&(d({clinic_name:e.clinic_name||"",street_address:e.street_address||"",city:e.city||"",state_province:e.state_province||"",postal_code:e.postal_code||"",country:e.country||"",google_maps_url:e.google_maps_url||"",latitude:null!=e.latitude?String(e.latitude):"",longitude:null!=e.longitude?String(e.longitude):"",operating_hours:e.operating_hours||"",provides_24h_emergency:!!e.provides_24h_emergency,microchip_services:!!e.microchip_services,has_microchip_scanners:!!e.has_microchip_scanners,website:e.website||"",phone:e.phone||"",alt_phone:e.alt_phone||"",years_in_practice:null!=e.years_in_practice?String(e.years_in_practice):"",specializations:(e.specializations||[]).join(", "),additional_services:(e.additional_services||[]).join(", "),scanner_types:(e.scanner_types||[]).join(", ")}),null!=e.latitude&&null!=e.longitude)){let t=Number(e.latitude),r=Number(e.longitude);Number.isNaN(t)||Number.isNaN(r)||m({lat:t,lng:r})}},[e]);let y=e=>{let{name:t,value:r,type:s,checked:a}=e.target;d(e=>({...e,[t]:"checkbox"===s?a:r})),"google_maps_url"===t&&(m(null),h(""),p(!1))},f=async e=>{if(!e.trim()){m(null),h("");return}p(!0),h("");try{let t=await fetch("/api/maps-coords",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})}),r=await t.json();if(!t.ok||r.error)throw Error(r.error||"API failed to return coordinates.");d(e=>{var t,s;return{...e,latitude:String(null!==(t=r.lat)&&void 0!==t?t:""),longitude:String(null!==(s=r.lng)&&void 0!==s?s:"")}}),m({lat:parseFloat(r.lat),lng:parseFloat(r.lng)}),h("")}catch(e){h(e instanceof Error&&e.message?e.message:"Could not extract location. Pin your exact location in Google Maps → Share → Copy link."),m(null)}finally{p(!1)}};(0,a.useEffect)(()=>{let e=setTimeout(()=>{f(c.google_maps_url)},500);return()=>clearTimeout(e)},[c.google_maps_url]);let b=async t=>{if(t.preventDefault(),!(null==e?void 0:e.id))return;let r={clinic_name:c.clinic_name.trim(),street_address:c.street_address.trim()||null,city:c.city.trim()||null,state_province:c.state_province.trim()||null,postal_code:c.postal_code.trim()||null,country:c.country.trim()||null,google_maps_url:""===c.google_maps_url.trim()?void 0:c.google_maps_url.trim(),latitude:""===c.latitude.trim()?null:c.latitude.trim(),longitude:""===c.longitude.trim()?null:c.longitude.trim(),operating_hours:c.operating_hours.trim()||null,provides_24h_emergency:c.provides_24h_emergency,microchip_services:c.microchip_services,has_microchip_scanners:c.has_microchip_scanners,website:c.website.trim()||null,phone:c.phone.trim()||null,alt_phone:c.alt_phone.trim()||null,years_in_practice:""===c.years_in_practice.trim()?null:Number(c.years_in_practice),specializations:""===c.specializations.trim()?null:c.specializations.split(",").map(e=>e.trim()),additional_services:""===c.additional_services.trim()?null:c.additional_services.split(",").map(e=>e.trim()),scanner_types:""===c.scanner_types.trim()?null:c.scanner_types.split(",").map(e=>e.trim())};await o(e.id,r)};return t&&!e?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:"Loading clinic data…"})}):r&&!e?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsx)("p",{className:"text-red-600 text-sm",children:r})}):e?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("header",{className:"border-b bg-white",children:(0,s.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-4",children:[(0,s.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"My clinic"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Update your clinic details, address, and services. Changes may be reviewed before they appear to pet owners."})]})}),(0,s.jsx)("main",{className:"max-w-5xl mx-auto px-4 py-6 space-y-6",children:(0,s.jsxs)("form",{onSubmit:b,className:"bg-white rounded-xl shadow-sm border p-4 space-y-4",children:[(0,s.jsxs)("section",{children:[(0,s.jsx)("h2",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Clinic information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Clinic name"}),(0,s.jsx)("input",{type:"text",name:"clinic_name",value:c.clinic_name,onChange:y,className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-emerald-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Website"}),(0,s.jsx)("input",{type:"url",name:"website",value:c.website,onChange:y,className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"https://example.com"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Phone"}),(0,s.jsx)("input",{type:"tel",name:"phone",value:c.phone,onChange:y,className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Alternate phone"}),(0,s.jsx)("input",{type:"tel",name:"alt_phone",value:c.alt_phone,onChange:y,className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Years in practice"}),(0,s.jsx)("input",{type:"number",name:"years_in_practice",min:0,max:100,value:c.years_in_practice,onChange:y,className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-emerald-500"})]})]})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h2",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Address & location"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Street address"}),(0,s.jsx)("input",{type:"text",name:"street_address",value:c.street_address,onChange:y,className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"City"}),(0,s.jsx)("input",{type:"text",name:"city",value:c.city,onChange:y,className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"State / Province"}),(0,s.jsx)("input",{type:"text",name:"state_province",value:c.state_province,onChange:y,className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Postal code"}),(0,s.jsx)("input",{type:"text",name:"postal_code",value:c.postal_code,onChange:y,className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Country"}),(0,s.jsx)("input",{type:"text",name:"country",value:c.country,onChange:y,className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Google Maps URL"}),(0,s.jsx)("input",{type:"url",name:"google_maps_url",value:c.google_maps_url,onChange:y,className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"https://maps.app.goo.gl/... or https://www.google.com/maps/@lat,lng"}),(0,s.jsx)("p",{className:"mt-1 text-[11px] text-gray-500",children:"Paste a Google Maps share link. Coordinates and map will update automatically."})]}),(x||u||g)&&(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Location preview"}),(0,s.jsx)("div",{className:"h-64 rounded-lg overflow-hidden border border-gray-200",children:x?(0,s.jsx)("div",{className:"flex items-center justify-center h-full bg-gray-50",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-emerald-500 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Extracting location..."})]})}):u?(0,s.jsx)(i,{mapPosition:u,clinicName:c.clinic_name,streetAddress:c.street_address,city:c.city,country:c.country}):(0,s.jsx)("div",{className:"flex items-center justify-center h-full bg-gray-50",children:(0,s.jsx)("p",{className:"text-xs text-red-500 text-center px-4",children:g})})}),u&&(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-[10px] font-medium text-gray-500 mb-1",children:"Latitude"}),(0,s.jsx)("input",{type:"text",value:c.latitude,readOnly:!0,className:"w-full rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-1 text-xs text-emerald-800"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-[10px] font-medium text-gray-500 mb-1",children:"Longitude"}),(0,s.jsx)("input",{type:"text",value:c.longitude,readOnly:!0,className:"w-full rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-1 text-xs text-emerald-800"})]})]})]})]})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h2",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Services & equipment"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 text-xs text-gray-700",children:[(0,s.jsx)("input",{type:"checkbox",name:"provides_24h_emergency",checked:c.provides_24h_emergency,onChange:y,className:"h-3 w-3 rounded border-gray-300"}),"24h emergency services"]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 text-xs text-gray-700",children:[(0,s.jsx)("input",{type:"checkbox",name:"microchip_services",checked:c.microchip_services,onChange:y,className:"h-3 w-3 rounded border-gray-300"}),"Microchip implantation services"]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 text-xs text-gray-700",children:[(0,s.jsx)("input",{type:"checkbox",name:"has_microchip_scanners",checked:c.has_microchip_scanners,onChange:y,className:"h-3 w-3 rounded border-gray-300"}),"Microchip scanners available"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Operating hours"}),(0,s.jsx)("textarea",{name:"operating_hours",value:c.operating_hours,onChange:y,rows:3,className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"e.g. Mon–Fri 9:00–18:00, Sat 10:00–14:00"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Specializations (comma separated)"}),(0,s.jsx)("input",{type:"text",name:"specializations",value:c.specializations,onChange:y,className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"Dermatology, Surgery, Exotic pets"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Additional services (comma separated)"}),(0,s.jsx)("input",{type:"text",name:"additional_services",value:c.additional_services,onChange:y,className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"Grooming, Boarding, Home visits"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Scanner types (comma separated)"}),(0,s.jsx)("input",{type:"text",name:"scanner_types",value:c.scanner_types,onChange:y,className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"ISO FDX-B, AVID, etc."})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 pt-2 border-t border-gray-100",children:[r&&(0,s.jsx)("p",{className:"text-[11px] text-red-600 self-center mr-auto",children:r}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-1.5 text-xs font-semibold rounded-full bg-emerald-600 text-white shadow hover:bg-emerald-700",children:t?"Saving…":"Save clinic details"})]})]})})]}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:"No clinic profile found."})})}},30009:(e,t,r)=>{"use strict";r.d(t,{K:()=>n});var s=r(16474);let a=async(e,t)=>{let r=await fetch(e,t);if(!r.ok)throw Error((await r.json()).error||"API request failed");return r},n=(0,s.v)((e,t)=>({veterinary:null,isLoading:!1,error:null,fetchVeterinaryData:async()=>{e({isLoading:!0,error:null});try{let t=await a("/api/veterinary/me",{}),r=await t.json();e({veterinary:r.veterinary,isLoading:!1})}catch(r){let t=r instanceof Error?r.message:"Unknown error";e({error:t,isLoading:!1}),console.error("Error fetching veterinary data:",t)}},updateVeterinary:async(r,s)=>{e({isLoading:!0,error:null});try{await a("/api/veterinary/".concat(r),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),await t().fetchVeterinaryData(),e({isLoading:!1})}catch(r){let t=r instanceof Error?r.message:"Unknown error";e({error:t,isLoading:!1}),console.error("Error updating veterinary clinic:",t)}},updatePassword:async(t,r,s)=>{e({isLoading:!0,error:null});try{await a("/api/veterinary/".concat(t,"/reset-password"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:r,newPassword:s})}),e({isLoading:!1})}catch(r){let t=r instanceof Error?r.message:"Password update failed";e({error:t,isLoading:!1}),console.error("Error updating veterinary password:",t)}}}))},16474:(e,t,r)=>{"use strict";r.d(t,{v:()=>o});var s=r(4346);let a=e=>{let t;let r=new Set,s=(e,s)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=s?s:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,n={setState:s,getState:a,getInitialState:()=>l,subscribe:e=>(r.add(e),()=>r.delete(e))},l=t=e(s,a,n);return n},n=e=>e?a(e):a,l=e=>e,i=e=>{let t=n(e),r=e=>(function(e,t=l){let r=s.useSyncExternalStore(e.subscribe,s.useCallback(()=>t(e.getState()),[e,t]),s.useCallback(()=>t(e.getInitialState()),[e,t]));return s.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},o=e=>e?i(e):i}},e=>{var t=t=>e(e.s=t);e.O(0,[1829,9539,7358],()=>t(76447)),_N_E=e.O()}]);