(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5310],{46687:(e,t,a)=>{Promise.resolve().then(a.bind(a,96225))},96225:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(22194),s=a(4346),n=a(30009);function i(e){let{initialData:t,onUpdate:a,isSaving:n,error:i}=e,[c,o]=(0,s.useState)({contact_person:t.contact_person||"",license_number:t.license_number||"",terms_accepted:!!t.terms_accepted,data_accuracy_confirmed:!!t.data_accuracy_confirmed,professional_confirmation:!!t.professional_confirmation,consent_for_referrals:!!t.consent_for_referrals,email_updates_opt_in:!!t.email_updates_opt_in}),l=e=>{let{name:t,value:a,type:r,checked:s}=e.target;o(e=>({...e,[t]:"checkbox"===r?s:a}))},d=async e=>{e.preventDefault();let t={contact_person:c.contact_person.trim()||null,license_number:c.license_number.trim()||null,terms_accepted:c.terms_accepted,data_accuracy_confirmed:c.data_accuracy_confirmed,professional_confirmation:c.professional_confirmation,consent_for_referrals:c.consent_for_referrals,email_updates_opt_in:c.email_updates_opt_in};await a(t)};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"border-b bg-white",children:(0,r.jsxs)("div",{className:"max-w-3xl mx-auto px-4 py-4",children:[(0,r.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Professional profile"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Manage your contact details and professional confirmations. This information builds trust with pet owners."})]})}),(0,r.jsxs)("main",{className:"max-w-3xl mx-auto px-4 py-6 space-y-6",children:[(0,r.jsxs)("section",{className:"bg-white rounded-xl shadow-sm border p-4",children:[(0,r.jsx)("h2",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Account details"}),(0,r.jsxs)("dl",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2 text-xs",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-gray-500",children:"Email"}),(0,r.jsx)("dd",{className:"text-gray-900",children:t.email})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-gray-500",children:"Clinic"}),(0,r.jsx)("dd",{className:"text-gray-900",children:t.clinic_name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-gray-500",children:"Account created"}),(0,r.jsx)("dd",{className:"text-gray-900",children:new Date(t.created_at).toLocaleDateString()})]}),t.updated_at&&(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-gray-500",children:"Last updated"}),(0,r.jsx)("dd",{className:"text-gray-900",children:new Date(t.updated_at).toLocaleDateString()})]})]})]}),(0,r.jsxs)("form",{onSubmit:d,className:"bg-white rounded-xl shadow-sm border p-4 space-y-4",children:[(0,r.jsxs)("section",{children:[(0,r.jsx)("h2",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Responsible veterinarian"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Contact person / Vet name"}),(0,r.jsx)("input",{type:"text",name:"contact_person",value:c.contact_person,onChange:l,className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"Dr. Jane Doe"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"License / registration number"}),(0,r.jsx)("input",{type:"text",name:"license_number",value:c.license_number,onChange:l,className:"w-full rounded-lg border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"e.g. VET-123456"})]})]})]}),(0,r.jsxs)("section",{children:[(0,r.jsx)("h2",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Declarations & consents"}),(0,r.jsx)("div",{className:"space-y-2 text-xs text-gray-700",children:Object.keys(c).map(e=>"boolean"==typeof c[e]?(0,r.jsxs)("label",{className:"flex items-start gap-2",children:[(0,r.jsx)("input",{type:"checkbox",name:e,checked:c[e],onChange:l,className:"h-3 w-3 mt-0.5 rounded border-gray-300"}),(0,r.jsx)("span",{children:{terms_accepted:"I accept the platform terms of use and agree to comply with the guidelines for veterinary partners.",data_accuracy_confirmed:"I confirm that the clinic and professional information I provide is accurate and kept up to date.",professional_confirmation:"I confirm that I am a licensed veterinary professional or legally authorized representative of this clinic.",consent_for_referrals:"I consent to being contacted about referrals, lost/found pet cases, and related coordination.",email_updates_opt_in:"I would like to receive email updates about product changes, tips, and important notifications."}[e]||e})]},e):null)})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 pt-2 border-t border-gray-100",children:[i&&(0,r.jsx)("p",{className:"text-[11px] text-red-600 self-center mr-auto",children:i}),(0,r.jsx)("button",{type:"submit",disabled:n,className:"px-4 py-1.5 text-xs font-semibold rounded-full bg-emerald-600 text-white shadow hover:bg-emerald-700 disabled:opacity-50",children:n?"Saving…":"Save profile"})]})]})]})]})}function c(){let{veterinary:e,isLoading:t,error:a,fetchVeterinaryData:c,updateVeterinary:o}=(0,n.K)();(0,s.useEffect)(()=>{e||c()},[e,c]);let l=async t=>{(null==e?void 0:e.id)&&await o(e.id,t)};return t&&!e?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:"Loading profile…"})}):a&&!e?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("p",{className:"text-red-600 text-sm",children:["Error: ",a]})}):e?(0,r.jsx)(i,{initialData:e,onUpdate:l,isSaving:t,error:a}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:"No profile found."})})}},30009:(e,t,a)=>{"use strict";a.d(t,{K:()=>n});var r=a(16474);let s=async(e,t)=>{let a=await fetch(e,t);if(!a.ok)throw Error((await a.json()).error||"API request failed");return a},n=(0,r.v)((e,t)=>({veterinary:null,isLoading:!1,error:null,fetchVeterinaryData:async()=>{e({isLoading:!0,error:null});try{let t=await s("/api/veterinary/me",{}),a=await t.json();e({veterinary:a.veterinary,isLoading:!1})}catch(a){let t=a instanceof Error?a.message:"Unknown error";e({error:t,isLoading:!1}),console.error("Error fetching veterinary data:",t)}},updateVeterinary:async(a,r)=>{e({isLoading:!0,error:null});try{await s("/api/veterinary/".concat(a),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),await t().fetchVeterinaryData(),e({isLoading:!1})}catch(a){let t=a instanceof Error?a.message:"Unknown error";e({error:t,isLoading:!1}),console.error("Error updating veterinary clinic:",t)}},updatePassword:async(t,a,r)=>{e({isLoading:!0,error:null});try{await s("/api/veterinary/".concat(t,"/reset-password"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:a,newPassword:r})}),e({isLoading:!1})}catch(a){let t=a instanceof Error?a.message:"Password update failed";e({error:t,isLoading:!1}),console.error("Error updating veterinary password:",t)}}}))},16474:(e,t,a)=>{"use strict";a.d(t,{v:()=>o});var r=a(4346);let s=e=>{let t;let a=new Set,r=(e,r)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=r?r:"object"!=typeof s||null===s)?s:Object.assign({},t,s),a.forEach(a=>a(t,e))}},s=()=>t,n={setState:r,getState:s,getInitialState:()=>i,subscribe:e=>(a.add(e),()=>a.delete(e))},i=t=e(r,s,n);return n},n=e=>e?s(e):s,i=e=>e,c=e=>{let t=n(e),a=e=>(function(e,t=i){let a=r.useSyncExternalStore(e.subscribe,r.useCallback(()=>t(e.getState()),[e,t]),r.useCallback(()=>t(e.getInitialState()),[e,t]));return r.useDebugValue(a),a})(t,e);return Object.assign(a,t),a},o=e=>e?c(e):c}},e=>{var t=t=>e(e.s=t);e.O(0,[1829,9539,7358],()=>t(46687)),_N_E=e.O()}]);